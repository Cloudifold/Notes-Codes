\input{../temp.tex}

\begin{document}
    \title{CW complexes}
    \author{{\color{pink}{Cloudi}}{\color{Aquamarine}{fold}}}
    \maketitle
    \newpage

    \setcounter{section}{-1}

    \section{Basic Definitions and Lemmas}
    \begin{defn}
        A \tbf{CW-complex} is a space constructed by successively attaching cells:\\
        For $n \in \bbN, n \geq 0$, there are maps $\{ \varphi_i : S^{n-1} \to X^{n-1} \}_{i \in I_n}$
        (called characteristic maps). The way to construct $X^n$ (called $n$-skeleton of $X$) is :\\
        (starting from $X^{-1} = \emptyset$, if we start from $X^{-1} = A$, we 
        say $(X,A)$ is a \tbf{relative CW-complex})

        \[\begin{tikzcd}
            {\coprod_{i \in I_n}S^{n-1}} & {X^{n-1}} \\
            {\coprod_{i\in I_n}D^n} & {X^n}
            \arrow[hook, from=1-1, to=2-1]
            \arrow[from=2-1, to=2-2]
            \arrow["{\coprod_{i \in I_n}\varphi_i}", from=1-1, to=1-2]
            \arrow[hook, from=1-2, to=2-2]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
        \end{tikzcd}(pushout)\]\\
        and the resulting CW-complex $X$ is $\colim \{X^0 \to \cdots \to X^n \to X^{n+1} \to \cdots \}$.
        The images of $\interior{D^n_i}$ in $X$ is called open cell $e^n_i$ of $X$.
    \end{defn}

    \begin{defn}
        $A$ is a subcomplex of CW-complex $X$ iff for any open cell $e^n_i$ of $X$, $A$ satisfy:
        $A \cap e^n_i \neq \emptyset \implies \bar{e^n_i} \subseteq A $.\\
        Pair of $X$ and subcomplex $A$ : $(X,A)$ is called a CW-pair.
    \end{defn}

    \begin{defn}
        The Infinite Symmetric Product of a pointed space $(X,x_0)$ is colimit of its $n$-th Symmetric Products
        ( $\SP^n X := (\prod_{\{0,1,\dots , n-1\}} X ) / S_n$ ) :\\
        \begin{align*}
            \colim \{\dots \hookrightarrow \SP^{n} X & \hookrightarrow \SP^{n+1} X \hookrightarrow \cdots \} \\
            \{x_1, \dots, x_n\} & \mapsto \{x_0, x_1, \dots, x_n\}    
        \end{align*}
    \end{defn}

    \begin{defn}
        For $n \geq 1$, a map between pairs $f : (X,A) \to (Y,B)  $ is an $n$-equivalence
        if:
        \begin{itemize}
            \item $f_*^{-1}(\Im (\pi_0 B \to \pi_0 Y)) = \Im (\pi_0 A \to \pi_0 X)$
            \item For all choices of basepoint $a$ in $A$,
                $$
                f_* : \pi_q(X,A,a) \to \pi_q(Y,B,f(a))
                $$
                is isomorphism for $ 1 \leq q \leq n -1$ and epimorphism for $q = n$.
        \end{itemize}
        
    \end{defn}

    \begin{defn}
        A pair $(X,A)$ of topological spaces is \tbf{$n$-connected}
        if $\pi_0(A) \to \pi_0(X)$ is surjection and $\pi_q(X,A) = 0$ for
        $1 \leq q \leq n$.
    \end{defn}

    \begin{defn}
        For topological spaces $A \hookrightarrow X$, 
        $A$ is a \textbf{strong deformation retract} of a neighborhood $V$ in $X$
        if:\\
        $\exists h : V \times I \to X$ such that\\
        $\forall x \in V,\ h(x,0) = x$\\
        $h(V,1) \subseteq A$\\
        $\forall (a,t) \in A \times I,\ h(a,t) = a$
    \end{defn}

    \begin{defn}
        For topological spaces $i : A \hookrightarrow X$, 
        $A$ is a \textbf{deformation retract} of $X$
        if:\\
        $\exists h : X \times I \to X$ such that\\
        $\forall x \in X,\ h(x,0) = x$\\
        $h(X,1) = A$\\
        $\forall (a,t) \in A \times I,\ h(a,t) = a$\\
        (That is, there are retraction $r : X \to A$ and homotopy $h : \id_X \simeq i \circ r \rel A$)\\
        And $r := h(-,1)$ is called a \tbf{deformation retraction}.
    \end{defn}

    \begin{defn}
        For topological spaces $A \hookrightarrow X$, 
        a neighborhood $V$ of $A$ is \textbf{deformable}\label{hyp:deformable} to $A$ if:\\
        $\exists h : X \times I \to X$ such that\\
        $\forall x \in X,\ h(x,0) = x$\\
        $h(A \times I) \subseteq A$, $h(V \times I) \subseteq V$.\\
        $h(V,1) \subseteq A$
    \end{defn}

    \begin{defn}
        For a topological group $G$, a \tbf{relative $G$-(equivariant) CW-complex} $(X,A)$ is a space constructed by successively attaching
        \tbf{$G$-equivariant cells} $G/H \times D^n$ on a $G$-space $A$:\\
        For $n \in \bbN, n \geq 0$, there are maps $\{ \varphi_i : G/H_i \times S^{n-1} \to X^{n-1} \}_{i \in I_n}$
        (called characteristic maps)
        where each $H_i$ is closed subgroup of $G$
        and $G$ acts trivially on $D^n$, $S^{n-1}$. 
        The way to construct $X^n$ (called $n$-skeleton of $X$) is:\\
        (starting from $X^{-1} = A$ where $A$ is an $G$-space)
        \[\begin{tikzcd}
            {\coprod_{i \in I_n} (G/H_i \times S^{n-1})} & {X^{n-1}} \\
            {\coprod_{i\in I_n}(G/H_i \times D^n)} & {X^n}
            \arrow[hook, from=1-1, to=2-1]
            \arrow["{\coprod_{i \in I_n}\phi_i}", from=2-1, to=2-2]
            \arrow["{\coprod_{i \in I_n}\varphi_i}", from=1-1, to=1-2]
            \arrow[hook, from=1-2, to=2-2]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
        \end{tikzcd}\text{(pushout in category of $G$-spaces)}\]\\
        The resulting $X$ is $\colim \{X^{-1} \to X^0 \to \cdots \to X^n \to X^{n+1} \to \cdots \}$.
        The images of $G/H_i \times \interior{D^n_i}$ in $X$ is called open $n$-cell of type $G/H_i$.
        $\phi_i$ is called the attaching map and
        $\varphi_i(G/H_i \times S^{n-1})$ is called the boundary of $\phi_i(G/H_i \times D^{n})$.
        If $A = \emptyset$, then $X$ is called a \tbf{$G$-(equivariant) CW-complex}.
    \end{defn}

    A criterion of weak homotopy equivalence:
    \begin{lem}
        \label{hyp:criterion-HELP-Dn+1,Sn}
        The following on a map $e : Y \to Z$ and any fixed $n \in \bbN$ are equivalent:\\
        \begin{enumerate}
            \item For any $y \in Y$ , $e_* : \pi_q(Y,y) \to \pi_q(Z,e(y))$
                is monomorphism for $q = n$ and is epimorphism for $q = n+1$.
            \item (HELP of $(D^{n+1},S^n)$) Given maps $f : D^{n+1} \to Z$, $g : S^n \to Y$
            and homotopy $h : f \circ i \simeq e \circ g $:
            \[\begin{tikzcd}
                {S^n} & {D^{n+1}} \\
                Y & Z
                \arrow["g"', from=1-1, to=2-1]
                \arrow["e"', from=2-1, to=2-2]
                \arrow["i", hook, from=1-1, to=1-2]
                \arrow["f", from=1-2, to=2-2]
                \arrow["h"', shorten <=8pt, shorten >=8pt, Rightarrow, from=1-2, to=2-1]
            \end{tikzcd}\]
            then we have extension $g^+ : D^{n+1} \to Y$ of $g$
            and $h^+ : f \simeq e \circ g^+$:
            \[\begin{tikzcd}
                S^n & D^{n+1} \\
                Y & Z
                \arrow["g"', from=1-1, to=2-1]
                \arrow[hook, from=1-1, to=1-2]
                \arrow[""{name=0, anchor=center, inner sep=0}, "f", from=1-2, to=2-2]
                \arrow["e"', from=2-1, to=2-2]
                \arrow["{g^+}"', from=1-2, to=2-1]
                \arrow["{h^+}", shorten <=10pt, shorten >=10pt, Rightarrow, from=0, to=2-1]
            \end{tikzcd}\]
            \item Conclusion above holds when the given $h$ is $id_{f \circ i}$.
        \end{enumerate}
    \end{lem}

    \begin{prf}
        Trivially \tit{2.} implies \tit{3.}\\

        Our first goal : \tit{3.} implies \tit{1.}\\

        Fix $n\in \bbN$. $\pi_n(e)$ is monomorphism:\\
        For $n = 0$, \tit{3.} says if we have path $e(y) \simeq e(y') $
        then we have path $y \simeq y'$.That is to say
        $e$ can not map two path-connected component to one.\\
        For $n > 0$, \tit{3.} says if $e \circ g$ is nullhomotopic,
        then $g : S^n \to Y$ could be extend to $g^+ : D^{n+1} \to Y$,
        which can be used to construct nullhomotopy of $g$.\\

        Fix $n \in \bbN$. $\pi_{n+1}(e)$ is epimorphism:\\
        For $[f] \in \pi_{n+1}(Z,e(y)) \cong [D^{n+1},S^n; Z,e(y)]$,
        let $g := s \mapsto y$, the extension $g^+$ satisfy
        $e_* ([g^+]) = [f]$, that proves $e_*$ is epimorphism.\\

        Second goal : \tit{1.} implies \tit{2.}\\

        Fix $g, f, h$ in the condition of \tit{2.} first.
        And observe that
        $\pi_n(Y,y) = [S^n,\ast; Y,y]$, $\pi_{n+1}(Y,y) = [D^{n+1},S^n; Y,y]$.\\
        There is a map $f' : (D^{n+1},S^n) \to Z$ homotopic to $f$
        defined by $f' = f \circ b(-,1)$
        where
        \begin{align*}
            b : CS^n \times I & \to CS^n\\
                (\ol{(x,t)} , s)  & \mapsto
                \begin{cases}
                    \ol{(x,1-2t)} \quad t \leq \frac{s}{2}  \\
                    \ol{(x,\frac{t-s/2}{1-s/2})} \quad t \geq \frac{s}{2}
                \end{cases}
        \end{align*}
        (recall that $D^{n+1} \simeq CS^n $)
        Therefore we can replace $f$ with $f'$.
        Using the epimorphism leads to $h' : e \circ {g^+}' \simeq f'$,
        using the monomorphism leads to $r : {g^+}' \circ i \simeq g $.
        Construct $g^+ := a(-,1) $ using
        \begin{align*}
            a : CS^n \times I & \to Z\\
                (\ol{(x,t)} , s)  & \mapsto
                \begin{cases}
                    r(x, s-2t) \quad t \leq \frac{s}{2}  \\
                    {g^+}'(x,\frac{t-s/2}{1-s/2}) \quad t \geq \frac{s}{2}
                \end{cases}
        \end{align*}

        And that is the end of the proof:

        \[\begin{tikzcd}
            {S^n} && {D^{n+1}} \\
            \\
            Y && Z
            \arrow[from=1-1, to=3-1]
            \arrow[from=1-1, to=1-3]
            \arrow[from=3-1, to=3-3]
            \arrow[""{name=0, anchor=center, inner sep=0}, "f", curve={height=-12pt}, from=1-3, to=3-3]
            \arrow[""{name=1, anchor=center, inner sep=0}, curve={height=-12pt}, from=1-3, to=3-1]
            \arrow[""{name=2, anchor=center, inner sep=0}, curve={height=12pt}, from=1-3, to=3-1]
            \arrow[""{name=3, anchor=center, inner sep=0}, "{f'}"', curve={height=12pt}, from=1-3, to=3-3]
            \arrow["b", shorten <=4pt, shorten >=4pt, Rightarrow, from=1, to=2]
            \arrow[shorten <=5pt, shorten >=5pt, Rightarrow, from=0, to=3]
            \arrow["{h'}", shift left=5, shorten <=4pt, shorten >=0pt, Rightarrow, from=3, to=1]
        \end{tikzcd}\]
        \qed
        

    \end{prf}



    \section{Properties and Examples}

    \begin{thm}
        Homotopy Extension and Lifting property\label{hyp:HELP}:\\
        $A$ : a topological space\\
        $X$ : result of successively attaching cells on $A$ of dimensions $0,1,\dots,k$ ($k \leq n$)\\
        $e : Y \to Z$ : $n$-equivalence\\
        $g : A \to Y$, $f : X \to Z$\\
        $h : f|_A  \simeq e \circ g $\\

        \[\begin{tikzcd}
            A & X \\
            Y & Z
            \arrow["g"', from=1-1, to=2-1]
            \arrow[hook, from=1-1, to=1-2]
            \arrow["f", from=1-2, to=2-2]
            \arrow["e"', from=2-1, to=2-2]
            \arrow["h"', shorten <=7pt, shorten >=7pt, Rightarrow, from=1-2, to=2-1]
        \end{tikzcd}\]\\
        Then there exists
        $g^+ : X \to Y$ extends $g$ ($g^+|_A = g$)\\
        and $h^+ : X \times I \to Z$ extends $h$, $h^+ : f \simeq e \circ g^+$
        \[\begin{tikzcd}
            A & X \\
            Y & Z
            \arrow["g"', from=1-1, to=2-1]
            \arrow[hook, from=1-1, to=1-2]
            \arrow[""{name=0, anchor=center, inner sep=0}, "f", from=1-2, to=2-2]
            \arrow["e"', from=2-1, to=2-2]
            \arrow["{g^+}"', from=1-2, to=2-1]
            \arrow["{h^+}", shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=2-1]
        \end{tikzcd}\]
    \end{thm}

    \begin{prf}
        It suffices to prove the case $A = S^{k-1}, X = D^k$
        , $e$ is inclusion. (replace $Z$ by $M_e$)
        Apply HEP of $(D^k,S^{k-1})$:\\
        \[\begin{tikzcd}
            {S^{k-1}} & {D^k} \\
            {S^{k-1}\times I} & {D^k \times I} \\
            && Z
            \arrow[from=1-1, to=1-2]
            \arrow[from=1-1, to=2-1]
            \arrow[from=2-1, to=2-2]
            \arrow[from=1-2, to=2-2]
            \arrow["h"', curve={height=12pt}, from=2-1, to=3-3]
            \arrow["f", curve={height=-12pt}, from=1-2, to=3-3]
            \arrow["{\hat{h}}", dashed, from=2-2, to=3-3]
        \end{tikzcd}\]\\
        $f' := \hat{h}(-,1)$, replace $f$ with $f'$ the diagram would be strictly commute.
        Therefore, $f'$ is map of pairs $(D^k,S^{k-1}) \to (Z,Y)$,
        $k\leq n $ implies $f'$ is nullhomotopic, suppose $h^+ : D^k \times I \to Z$ is the nullhomotopy,
        then $g^+ := h^+(-,1)$ satisfy $ g^+(D^k) \subseteq Y $.\\
        \qed
    \end{prf}

    \begin{note}
        In HELP, at condition $Y=Z$ and $e = \id$,
        HELP says $(X,A)$ have HEP
    \end{note}

    \begin{cor}
        If \\
        $A$ : a topological space\\
        $X$ : result of successively attaching cells on $A$ of any dimensions\\
        Then, $(X,A)$ have HEP.
    \end{cor}

    \begin{thm}
        If $X$ is an CW-complex, $e : Y \to Z$ is an $n$-equivalence,
        Then $e_{\ast} : [X,Y] \to [X,Z]$ is a bijection if $\dim{X} < n$,
        and a surjection if $\dim{X} = n$.(Also valid for pointed case)
    \end{thm}

    \begin{prf}
        Surjectivity:\\
        Apply HELP of $(X,\emptyset)$ ($(X,x_0)$ for pointed case) to obtain $e_{\ast} [g^+] \simeq [f] $:
        \[\begin{tikzcd}
            \emptyset & X \\
            Y & Z
            \arrow[from=1-1, to=1-2]
            \arrow["f", from=1-2, to=2-2]
            \arrow[from=1-1, to=2-1]
            \arrow["e"', from=2-1, to=2-2]
            \arrow["{g^+}"', from=1-2, to=2-1]
        \end{tikzcd}\]\\
        Injectivity ($\dim{X} < n$):\\
        Suppose $[g_0],[g_1] \in [X,Y]$, $e_{\ast}[g_0] = e_{\ast}[g_1]$.\\
        Let $f : e \circ g_0 \simeq e \circ g_1$
        Apply HELP to $(X \times I, X  \times \partial I)$:
        \[\begin{tikzcd}
            {X\times \partial I} & {X \times I} \\
            Y & Z
            \arrow[from=1-1, to=1-2]
            \arrow["f", from=1-2, to=2-2]
            \arrow["g"', from=1-1, to=2-1]
            \arrow["e"', from=2-1, to=2-2]
            \arrow["{g^+}"', from=1-2, to=2-1]
        \end{tikzcd}\]
        \qed
    \end{prf}

    \begin{cor}
        If $X$ is a CW-complex, $e : Y \to Z$ is weak homotopy equivalence,
        then $e_{\ast} : [X,Y] \to [X,Z]$ is bijection.
    \end{cor}

    

    \subsection{CW-approximation}

    \begin{defn}
        A \textbf{CW-approximation} of $(X,A) \in \mbf{Top(2)}$ is a CW-pair $(\widetilde{X}, \widetilde{A})$ and a
        weak homotopy equivalence of pairs $\varphi : (\widetilde{X}, \widetilde{A}) \to (X,A)$.
    \end{defn}

    \begin{thm}
        \label{hyp:Existence-of-CW-approximation}
        (Existence of CW-approximation)
        If $X$ is path-connected pointed space ($0$-connected),
        then there is a CW-approximation $(\wtl{X},\ast) \xrightarrow{\phi} (X,\ast)$.
        If $X$ is $n$-connected then $\wtl{X}$ could be chosen to satisfy
        $\wtl{X}^n = \ast $.
        (Moreover, each characteristic map of $X$ is pointed)
    \end{thm}

    \begin{prf}
        If $X$ is $n$-connected,
        then $\phi_n : Y^n := \ast \to X$ is $n$-equivariance.
        Assmue inductively that we already have $m$-equivalence 
        $Y^m \xrightarrow{\phi_m} X$ ($m \geq n$),
        Our goal is construct $Y^{m+1}$ and $\phi_{m+1} : Y^{m+1} \to X$.\\
        Let
        $$
        f^+_m : \bigoplus_{a \in A} \bbZ_a \twoheadrightarrow \ker( \phi_{m*} ) \subseteq \pi_m(Y^m)
        $$
        be a free resolution of $\ker( \phi_{m*} )$
        ($\coprod_{a \in A} \bbZ_a$ if $m=1$),
        and obtain a (unique up to homotopy)
        map $f_m : \bigvee_{a \in A} S^m_a \to Y^m$
        defined by $f_m|_{S^m_a} := k_a$ where $[k_a] = f^+_m(1_a) \in [S^m,Y^m]_* $.
        We have: (since $[\phi_m \circ f_m] = 0$)
        % https://q.uiver.app/?q=WzAsNCxbMCwwLCIgXFxiaWd2ZWVfe2EgXFxpbiBBfSBTXm1fYSJdLFsxLDAsIllebSJdLFsyLDEsIlgiXSxbMiwwLCJDX3tmX219Il0sWzAsMSwiZl9tIl0sWzEsMiwiXFxwaGlfbSIsMl0sWzEsM10sWzMsMiwiXFx2YXJwaGlfe20rMX0iLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XV0=
        \[\begin{tikzcd}
            { \bigvee_{a \in A} S^m_a} & {Y^m} & {C_{f_m}} \\
            && X
            \arrow["{f_m}", from=1-1, to=1-2]
            \arrow["{\phi_m}"', from=1-2, to=2-3]
            \arrow[from=1-2, to=1-3]
            \arrow["{\varphi_{m+1}}", dashed, from=1-3, to=2-3]
        \end{tikzcd}\]
        $C_{f_m}$ is a CW-complex with $\dim = n+1$ with $m$-skeleton $Y^m$.
        $\varphi_{m+1*} : \pi_m(C_{f_m}) \to \pi_m(X)$ is isomorphism,
        but $\varphi_{m+1*} : \pi_{m+1}(C_{f_m}) \to \pi_{m+1}(X)$
        is not necessarily an epimorphism.\\
        Define the set $B := \pi_{m+1}(X) - \varphi_{m+1*} ( \pi_{m+1}(C_{f_m})) $
        and
        $Y^{m+1} := C_{f_m} \vee (\bigvee_{b \in B} S^{m+1}_b)$.\\
        Define
        $\phi^{m+1}$ by 
        $\phi^{m+1}|_{C_{f_m}} := \varphi_{m+1}$
        and $\phi^{m+1}|_{S^{m+1}_b} := r_b$ where $[r_b] = b \in [S^{m+1},X]_*$.\\
        $\wtl{X} := \colim_m \{ Y^0 \hookrightarrow \cdots \hookrightarrow Y^m \hookrightarrow Y^{m+1} \hookrightarrow \cdots \}$,
        and $\phi = \colim_m \phi_m$\\
        If $X$ is not path-connected, construct CW-approximation for each path-connected component.\\
        \qed

    \end{prf}

    \begin{note}
        The proof of existence of CW-approximation
        uses \hyperref[hyp:Homotopy-Excision-Theorem]{homotopy excision theorem}
        (CW-triad version).
        Proof of CW-traid version does not need CW-approximation.
        There is no circular argument.
    \end{note}

    \begin{prop}
        For any pair $(X,A)$, there exists CW-approximation
        $\phi : (\wtl{X}, \wtl{A}) \to (X,A)$.
    \end{prop}

    \begin{prf}
        Construct $\phi_A : \wtl{A} \to A $ first
        and use analogue method in proof of theorem \ref{hyp:Existence-of-CW-approximation}
        with $Y^0 := \wtl{A}$.
        \qed
    \end{prf}

    \begin{lem}
        \label{hyp:funCWapprox}
        $\varphi, \psi$ are CW-approximations of $X,Y$,
        $f : X \to Y$, then 
        \[\begin{tikzcd}
            {\widetilde{X}} & X \\
            {\widetilde{Y}} & Y
            \arrow["{\exists \widetilde{f}}"', dashed, from=1-1, to=2-1]
            \arrow["\varphi", from=1-1, to=1-2]
            \arrow["f", from=1-2, to=2-2]
            \arrow["\psi"', from=2-1, to=2-2]
        \end{tikzcd}\] commutes up to homotopy,
        and $\widetilde{f}$ is unique up to homotopy.
    \end{lem}

    \begin{prf}
        Directly from $\psi_{\ast} : [\widetilde{X},\widetilde{Y}] \to [\widetilde{X},Y]$ is bijection.
        \qed
    \end{prf}

    \begin{thm}
        $\varphi, \psi$ are CW-approximations of $(X,A), (Y,B)$,
        $f : (X,A) \to (Y,B)$, then 
        \[\begin{tikzcd}
            {(\widetilde{X},\widetilde{A})} & (X,A) \\
            {(\widetilde{Y},\widetilde{B})} & (Y,B)
            \arrow["{\exists \widetilde{f}}"', dashed, from=1-1, to=2-1]
            \arrow["\varphi", from=1-1, to=1-2]
            \arrow["f", from=1-2, to=2-2]
            \arrow["\psi"', from=2-1, to=2-2]
        \end{tikzcd}\] commutes up to homotopy,
        and $\widetilde{f}$ is unique up to homotopy.
    \end{thm}

    \begin{prf}
        Apply Lemma \ref{hyp:funCWapprox} to obtain map $\widetilde{f}_A : \widetilde{A} \to \widetilde{B}$
        and homotopy $h : \psi |_{\widetilde{B}} \circ \widetilde{f}_A \simeq f \circ \varphi|_{\widetilde{A}}$
        Use HELP of $(\widetilde{X}, \widetilde{A})$ to extend it:
        \[\begin{tikzcd}
            {\widetilde{A}} & {\widetilde{X}} \\
            {\widetilde{B}} & X \\
            {\widetilde{Y}} & Y
            \arrow[hook, from=1-1, to=1-2]
            \arrow["{\widetilde{f}_A}"', from=1-1, to=2-1]
            \arrow[hook, from=2-1, to=3-1]
            \arrow[from=3-1, to=3-2]
            \arrow[from=1-2, to=2-2]
            \arrow[from=2-2, to=3-2]
            \arrow["{\widetilde{f}}"', from=1-2, to=3-1]
        \end{tikzcd}\]
        $\psi_{\ast}$ is bijection implies the uniqueness up to homotopy of $\widetilde{f}$.
        \qed
    \end{prf}

    \begin{thm}
        (Whitehead's Theorem)\\
        Every $n$-equivalence between CW-complexes whose dimension is lower than $n$, is homotopy equivalence.
        Every weak homotopy equivalence between CW-complexes is homotopy equivalence.
    \end{thm}

    \begin{prf}
        $e : Y \to Z$ induce bijections $ [Y,Y] \to [Y,Z]$ and $[Z,Y] \to [Z,Z]$,
        $[f] = e_{\ast}^{-1} [\id_Z]$ implies $[e \circ f] = [\id_Z]$ and $[e \circ f \circ e] = [e]$ ($[f \circ e] = e_{\ast}^{-1}[e] = [\id_Y]$).\\
        \qed
    \end{prf}

    \begin{cor}
        CW-approximation is unique up to homotopy.
    \end{cor}

    \begin{exmp}
        Polish circle (Warsaw circle) : closed topologist's sine curve.
        It is $n$-connected forall $n$ but not contractible.
    \end{exmp}

    \begin{defn}
        A cellular map between CW-pairs is $g:(X,A) \to (Y,B)$ such that
        $g(A\cup X^n) \subseteq B \cup Y^n$.
    \end{defn}

    \begin{thm}
        \label{hyp:cellular-approximation-lemma}
        For any map between CW-pairs $f : (X,A) \to (Y,B)$ there exists
        a cellular map $g$ such that $g \simeq f \rel A$
    \end{thm}

    \begin{prf}
        Construct $g$ inductively:\\
        Start from $A \cup X^0$:\\
        take paths $\gamma_i : f(x_i) \simeq y_i $, where $y_i$ is any point in $Y^0$ and $x_i \in X^0 - A$.\\
        Construct $h_0 : (X^0 \cup A) \times I \to Y $ : $h_0 |_{A} (a,t):= f(a)$,
        $h_0|_{X^0-A} (x_i,t) := \gamma_i(t)$.
        This is a homotopy from $f$ to $g_0 := h_0(-,1) : A\cup X^0 \to B \cup Y^0$\\
        Inductive step:\\
        Assume $g_n : A\cup X^n \to B \cup Y^n$ and homotopy $h_n : f|_{A \cup X^n} \simeq g_n$ is given, try to construct $g_{n+1}$:\\
        For each characteristic map $\varphi_i : S^n \to X^n$, take the resulting cell map $\varphi^+_i : D^{n+1} \to X^{n+1}$ 
        and use HELP of $(D^{n+1}, S^n)$:
        \[\begin{tikzcd}
            {S^n} & {D^{n+1}} \\
            {X^n} & {X^{n+1}} \\
            {B\cup Y^{n+1}} & Y
            \arrow[hook, from=1-1, to=1-2]
            \arrow["{\varphi_i}"', from=1-1, to=2-1]
            \arrow["{g_n}"', from=2-1, to=3-1]
            \arrow[hook, from=3-1, to=3-2]
            \arrow["{\varphi^+_i}", from=1-2, to=2-2]
            \arrow["f", from=2-2, to=3-2]
            \arrow["{g_{n+1,i}}"', from=1-2, to=3-1]
            \arrow["{h_{n+1,i}}", shorten <=4pt, shorten >=4pt, Rightarrow, from=2-2, to=3-1]
        \end{tikzcd}\]
        Glue all $g_{n+1,i}$ and $ h_{n+1,i}$ to produce $g_{n+1}$ and $h_{n+1} : f|_{A \cup X^{n+1}} \simeq g_{n+1}$.\\
        Final stage:\\
        Maps $g_n$ determine a cellular map $g : X \to Y$ since $X$ has the final topology determined by skeletons.
        \qed
    \end{prf}

    \begin{cor}
        \label{hyp:cellularity-of-homotopy-group}
        If $X$ is a pointed CW-complex,
        then the inclusions $X^{n+1} \hookrightarrow X^{n+2} \hookrightarrow \cdots \hookrightarrow X$
        induce $\pi_n(X^{n+1}) \cong \pi_n(X^{n+2}) \cong \cdots \cong \pi_n(X)$.
    \end{cor}

    \begin{prf}
        For $k \geq 1$,
        $X^{n+k} \hookrightarrow X^{n+k+1}$
        induces epimorphism
        $\pi_n(X^{n+k}) \twoheadrightarrow \pi_n(X^{n+k+1})$\\
        since every $f : (S^n, \ast) \to (X^{n+k+1},\ast)$
        is homotopic ($\rel \ast$) to an $g : (S^n, \ast) \to (X^n,\ast) \hookrightarrow (X^{n+k},\ast)$.\\
        Now we want to prove it is monomorphism,
        that is, $i_* [f] = 0 \implies [f] = 0$\\
        If $h : (S^n, \ast) \times I \to X^{n+k+1}$
        is a nullhomotopy in $X^{n+k+1}$\\
        of a map
        $f : (S^n, \ast) \to (X^{n+k}, \ast) \hookrightarrow (X^{n+k+1},\ast)$,\\
        then $h : (CS^n, S^n) \to (X^{n+k+1}, X^{n+k})$
        is homotopic ($\rel S^n$) to an
        $h' : (CS^n, S^n) \to (X^{n+k},X^{n+k})$,
        which is equivalent to $h' : S^n \times I \to X^{n+k} $
        with $h(S^n,1) = \ast$, $h(\ast,t) = \ast$, $h|_{S^n \times \{0\}} = f$.\\
        \qed
    \end{prf}

    \begin{lem}
        \label{hyp:dim-of-X-A-great-than-n-to-X,A-n-connected}
        If $(X,A)$ is CW-pair and all cells of $X-A$
        have $\dim > n$,
        then $(X,A)$ is $n$-connected.
    \end{lem}

    \begin{prf}
        For each $q \leq n$, and each $[f] \in \pi_q(X,A)$,
        $f \simeq g \rel S^{q-1} $ where $g$ is an cellular map.
        (use theorem \ref{hyp:cellular-approximation-lemma})
        $\pi_q(X,A) \ni [g] = 0$ since $g(S^{n-1} \cup e^n) = g(D^n) \subseteq A \cup X^n = A$.\\
        \qed
    \end{prf}

    \subsection{Operation of CW-complexes}

    Product of CW-complexes:

    \begin{exmp}
        Product topology of two CW-complexes does not coincide with the final topology (union topology):\\
        $X$ (star of countably many edges) :
        $X = X^1 = \bigvee_{n\in \omega} I_n $\\
        $Y$ (star of $\omega^{\omega}$ many edges) :
        $Y = Y^1 = \bigvee_{f \in \omega^{\omega}} I_f $
        ( $(I_n,0) \cong (I_f,0) \cong (I,0) $ )\\
        Consider subset $H$ of $X \times Y$:
        $H := \{ (\frac{1}{f(n)+1} , \frac{1}{f(n)+1}) \in I_n \times I_f \mid n \in \omega, f \in \omega^{\omega} \}$.\\
        $H$ is closed under the final topology
        since every cell of $X \times Y$ contains at most one point of $H$.
        But closure of $H$ contains $(0,0)$ at product topology:\\
        Let $U \times V$ be an open neighborhood (at product topology) of $(0,0)$,
        let $g : \omega \to \omega - 0$ be an increasing function such that
        forall $n \in \omega, [0,\frac{1}{g(n)}) \subseteq U \cap I_n$,
        let $k \in omega$ be sufficiently large that $\frac{1}{g(k)+1} \subseteq V \cap I_g$,
        then $(\frac{1}{g(k)+1} , \frac{1}{g(k)+1}) \in U \times V \cap H$.

    \end{exmp}

    \begin{prop}
        $X$ and $Y$ are CW-complexes, $X \times Y$ is CW-complex if\\
        $X$ or $Y$ is locally compact\\
        or\\
        both $X$ and $Y$ have countably many cells.\\
    \end{prop}

    Another way to realize $X \times Y$ as CW-complex
    is to change its topology to the compactly generated topology $k(X \times Y)$:

    
    \begin{defn}
        For subspace $A$ of $X$, $A$ is compactly closed if
        \begin{align*}
            \forall & \text{ compact space } K \\
                &\forall \text{ continuous } g : K \to X \\
                & \quad \! g^{-1}(A) \text{ is closed in } K
        \end{align*}
    \end{defn}
    
    \begin{defn}
        $X$ is $k$-space if any compactly closed subset is closed.
    \end{defn}

    \begin{defn}
        $X$ is weak Hausdorff if
        \begin{align*}
            \forall & \text{ compact space } K \\
                &\forall \text{ continuous } g : K \to X \\
                & \quad \! g(K) \text{ is closed in } K
        \end{align*}
    \end{defn}

    \begin{defn}
        The $k$-ification of a space $X$ is defined by:
        $k(X) := (X,\tau)$\\
        where $\tau = \{X - A \mid A \text{ is compactly closed set}\}$
    \end{defn}

    \begin{defn}
        $X$ is compactly generated space if it is $k$-space and weak Hausdorff. 
    \end{defn}

    \begin{note}
        If $X$ is weak Hausdorff,
        then $A \subseteq X$ is compactly closed iff
        \begin{align*}
            & \forall \text{ compact subspace } K \subseteq X \\
                & \quad \! A \cap K \text{ is closed in } X
        \end{align*}
        If $X$ is a CW-complex, then the topology defined on $k(X)$
        automatically coincide with the final topology induced by its CW-complex structure.
        We have CW-complex structure of $k(X \times Y)$
        is given by:
        \[\begin{tikzcd}
            {\partial I^n \times I^m \cup I^n \times \partial I^m} & {X^{n-1} \times Y^{m} \cup X^n \times Y^{m-1}} \\
            {I^n \times I^m} & {X^n \times Y^m}
            \arrow[from=1-1, to=1-2]
            \arrow[from=1-2, to=2-2]
            \arrow[from=2-1, to=2-2]
            \arrow[from=1-1, to=2-1]
        \end{tikzcd}\]
        Furthermore, the $k$-ification is right adjoint of the inclusion functor 
        $i$:
        \[\begin{tikzcd}
            {\mathbf{TOP_{CptGen}}} && {\mathbf{TOP_{weakHaus}}}
            \arrow[""{name=0, anchor=center, inner sep=0}, hook, "i", curve={height=-12pt}, from=1-1, to=1-3]
            \arrow[""{name=1, anchor=center, inner sep=0}, "{k(-)}", curve={height=-12pt}, from=1-3, to=1-1]
            \arrow["\dashv"{marking}, Rightarrow, draw=none, from=0, to=1]
        \end{tikzcd}\]
        This allows us to define the CW-complex structure on any limit of
        CW-complexes:
        $\lim_{i} X_i \approx \lim_i k(X_i) \approx k(\lim_i X_i)$
        ($X \approx k(X)$ and right adjoint preserve limits).
    \end{note}

    Quotient of CW-pair:

    \begin{prop}
        For CW-complex $X$ and subcomplex $A$, the Quotient space $X/A$ 
        have a CW-complex structure induced by $X$ and $A$.
    \end{prop}

    \begin{prf}
        Suppose the characteristic maps of $X$ are indexed by $\{I_n\}_{n \in \bbN}$
        and of $A$ are indexed by $\{I'_n\}_{n \in \bbN}$ ($I'_n \subseteq I_n$).
        Then the characteristic maps of $X/A$ are indexed by $\{ K_n\}_{n \in \bbN}$, which defined below:\\
        $K_0 := (I_0 - I'_0) \cup \{ i_0 \} $ where $i_0$ is an arbitrary element
        in $I'_0$\\
        $K_n := I_n - I'_n$ for $n > 0$.\\
        Verify the maps determine the CW-complex structure:\\
        \[\begin{tikzcd}
            {S^{n-1}} & {X^{n-1}} & {X^{n-1}/A^{n-1}} \\
            {D^n} & {X^n} & {X^n/A^{n-1}} & {A^n} \\
            && {X^n/A^n} & \ast \\
            && Z
            \arrow[from=1-1, to=2-1]
            \arrow[from=1-3, to=2-3]
            \arrow[from=2-3, to=3-3]
            \arrow[from=2-4, to=2-3]
            \arrow[from=3-4, to=3-3]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=90}, draw=none, from=3-3, to=2-4]
            \arrow[from=2-4, to=3-4]
            \arrow[curve={height=12pt}, from=2-1, to=4-3]
            \arrow[curve={height=-44pt}, from=1-3, to=4-3]
            \arrow[curve={height=28pt}, dashed, from=2-3, to=4-3]
            \arrow[curve={height=-6pt}, from=3-4, to=4-3]
            \arrow[dashed, from=3-3, to=4-3]
            \arrow[from=2-2, to=2-3]
            \arrow[from=1-2, to=1-3]
            \arrow[from=1-2, to=2-2]
            \arrow[from=1-1, to=1-2]
            \arrow[from=2-1, to=2-2]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-3, to=1-2]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
        \end{tikzcd}\]

        \qed
        
    \end{prf}

    Smash product of CW-complexes:

    \begin{prop}
        If $(X,x_0)$ , $(Y,y_0)$ are pointed CW-complexes with both countably many cell,
        and $X^{r-1} = \{x_0\}$, $Y^{s-1} = \{y_0\}$,
        then $X \wedge Y := X \times Y / X \vee  Y$ is
        an $(r+s-1)$-connected CW-complex.
    \end{prop}

    \begin{prf}
        $X \times Y$ is CW-complex with cells of the form
        $e^n_{i,X} \times \{y_0\}$, $\{x_0\} \times e^m_{j,Y}$
        or $e^n_{i,X} \times e^m_{j,Y}$
        for $n \geq r$, $m \geq s$.
        Cells of the first two forms are contianed in $X \vee Y$,
        therefore $(X \wedge Y)^{r+s-1} = \ast$.
        \qed
    \end{prf}

    \begin{cor}
        If $X$ is a pointed CW-complex,
        then $\Sigma^n X$ is an $(n-1)$-connected CW-complex.
    \end{cor}

    \subsection{Properties of Infinite Symmetric Product}
    Functoriality:\\

    Pointed map $f : X \to Y$
    induces
    \begin{align*}
        f_n : \SP^n X & \to \SP^{n}Y\\
            \{x_1, \dots, x_n\} & \mapsto \{f(x_1), \dots, f(x_n)\}
    \end{align*}
    
    \[\begin{tikzcd}
        {} & {\SP^n X} & {\SP^{n+1}X} & {} \\
        {} & {\SP^nY} & {\SP^{n+1} Y} & {}
        \arrow[from=1-2, to=1-3]
        \arrow[from=1-1, to=1-2]
        \arrow[from=2-1, to=2-2]
        \arrow["{f_n}", from=1-2, to=2-2]
        \arrow[from=2-2, to=2-3]
        \arrow["{f_{n+1}}", from=1-3, to=2-3]
        \arrow[from=2-3, to=2-4]
        \arrow[from=1-3, to=1-4]
    \end{tikzcd}\]

    Which induces map $\SP f : \SP X \to \SP Y$.
    And Functorial properties are directly from the constructions above.\\

    \label{hyp:SP-of-wedge-is-product-of-SP}
    $\SP(X_1 \vee X_2) \approx \SP(X_1) \times \SP(X_2)$, the homeomorphism
    is given by:
    \begin{align*}
    \SP(X_1) \times \SP(X_2) & \leftrightarrows \SP(X_1 \vee X_2)\\
    (\{a_1, a_2, \cdots , a_k\}, \{b_1, b_2, \cdots , b_m\}) & \mapsto \{a_1, a_2, \cdots , a_k, b_1, b_2, \cdots , b_m\}
    \end{align*}


    \label{hyp:SP-commute-with-directed-colimit} Commute with directed colimit:\\
    Suppose $P$ is a directed poset (that is $\A x,y \in P, \ \E z \in P, \ x \leq z , y \leq z$)
    and $X_i$ are pointed spaces indexed by $P$ satisfying $i \leq j \implies X_i \subseteq X_j$.\\
    Then $\SP^n (\colim_{i} X_i) \approx \colim_{i} (\SP^n X_i)$\\
    (Proof is obtained by showing that $ \SP^n f $ is continuous iff $f$ is,
    which implies final topology on $\colim_{i} (\SP^n X_i)$ agree on $\SP^n (\colim_i X_i)$)\\

    Suppose $i : A \hookrightarrow X$ is an pointed inclusion,
    then $\SP i : \SP A \hookrightarrow \SP X$ is also inclusion.
    Furthermore, if $A$ is open (or closed) in $X$, then $\SP A$ is open (or closed) in $\SP X$.\\

    \label{hyp:CW-structure-on-SP}CW-complex structure:\\

    We can have natural CW-complex structure on $\prod_n X$ by applying $k(-)$.
    following theorems allows us to prove that $\SP^n X = \prod_n X/S_n$
    have a CW-complex structure.

    \begin{defn}
        $G$ \tbf{acts cellularly} on a CW-complex $X$ if:
        \begin{align*}
            & \A  g \in G, e^n_i \text{ is open $n$-cell (of $X$)}\\
            & \quad \quad g(e^n_i) = e^n_j \text{ is open $n$-cell (of $X$)}
        \end{align*}
        and $g(e^n_i) = e^n_i$ implies $g|_{e^n_i} = \id_{e^n_i}$.
    \end{defn}

    \begin{lem}
        If $G$ is a discrete group, $X$ is CW-complex with $G$ cellularly act on $X$.
        Then $X$ is a $G$-CW-complex with $n$-skeleton $X^n$.
    \end{lem}

    \begin{prf}
        The goal is to show $X^n$ is obtained from $X^{n-1}$ by attaching $G$-equivariant cells.
        Since $\coprod_{i \in I_n} Y  = I_n \times Y$ ($I_n$ with discrete topology).
        We have:
        \[\begin{tikzcd}
            {I_n \times S^{n-1}} & {X^{n-1}} \\
            {I_n \times D^n} & {X^n}
            \arrow["\varphi", from=1-1, to=1-2]
            \arrow[from=1-2, to=2-2]
            \arrow["\phi"', from=2-1, to=2-2]
            \arrow[hook, from=1-1, to=2-1]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
        \end{tikzcd}\]
        $G$ acts cellularly on open $n$-cells
        implies $G$ acts on $I_n$.
        Decomposite $I_n$ into disjoint unions of 
        obrits $\coprod_{\alpha \in A} I_\alpha$
        choose $G$-isomorphisms 
        \begin{align*}
            G/H_\alpha & \cong I_\alpha\\
            g H_\alpha & \mapsto g i_\alpha
        \end{align*}
        And we have a well-defined $G$-map.
        \begin{align*}
            \phi_\alpha|_{e^n} : G/H_\alpha \times e^n \cong I_\alpha \times e^n & \to X^n\\
            (g H_\alpha, x) \mapsto (g i_\alpha, x) & \mapsto \phi_{g i_\alpha}(x) = g \phi_{i_\alpha}(x)
        \end{align*}
        Since we have $e^n = \interior{D^n}$, we obtain the following (by continuity):
        \begin{align*}
            \phi_\alpha : G/H_\alpha \times D^n  & \to X^n\\
            (g H_\alpha, x)  & \mapsto g \phi_{i_\alpha}(x)\\
            \phi_\alpha|_{S^{n-1}} = \varphi_\alpha : G/H_\alpha \times S^{n-1}  & \to X^{n-1}\\
            (g H_\alpha, s)  & \mapsto g \varphi_{i_\alpha}(s)\\
        \end{align*}
        Let $\varphi' := \coprod_{\alpha \in A} \varphi_\alpha$ and $\phi' := \coprod_{\alpha \in A} \phi_\alpha$
        we have:
        \[\begin{tikzcd}
            {\coprod_{\alpha \in A} (G/H_\alpha \times S^{n-1})} & {X^{n-1}} \\
            {\coprod_{\alpha \in A} (G/H_\alpha \times D^n)} & {X^n} \\
            && Z
            \arrow["{\varphi'}", from=1-1, to=1-2]
            \arrow[from=1-2, to=2-2]
            \arrow["{\phi'}"', from=2-1, to=2-2]
            \arrow[hook, from=1-1, to=2-1]
            \arrow["{\coprod f_\alpha}"', curve={height=18pt}, from=2-1, to=3-3]
            \arrow["f", curve={height=-18pt}, from=1-2, to=3-3]
            \arrow["{\exists ! f^+}", dashed, from=2-2, to=3-3]
        \end{tikzcd}\]
        Verify it is indeed a pushout of $G$-spaces:
        $f^+$ (is already determined uniquely as map between $G$-sets)
        is map between $G$-spaces.\\
        Since $X$ have compactly generated topology, $f^+$ is continuous on each compact subspace of $X$ implies $f^+$ is continuous
        on each compactly closed subspace of $X^n$, which implies $f^+$ is continuous on total $X^n$.\\
        $f^+$ is continuous on each closed $n$-cell $\{g H_\alpha \} \times D^n$
        and $f^+$ is continuous on $X^{n-1}$ implies $f^+$ is continuous on each compact subspace.
        (since each compact subspace intersect finitely with $n$-cells and $X^{n-1}$ (We use $X^n$ is $T_2$ to construct open cover))\\
        \qed
    \end{prf}

    \begin{thm}
        For any topological group morphism
        $\phi : H \to G$
        we have induced functors:\\
        pullback action:
        \begin{align*}
            G\mbf{-TOP} & \xrightarrow{\phi^*} H\mbf{-TOP}\\
            \left( \alpha(-,-)  : G \times X \to X \right) & \longmapsto \left(  \alpha(\phi(-),-) : H \times X \to X \right)\\
            ( f : X \to Y ) & \longmapsto  ( f : X \to Y )
        \end{align*}
        induced action:
        \begin{align*}
            H\mbf{-TOP} & \xrightarrow{G \times_H -} G\mbf{-TOP}  \\
            X & \longmapsto G \times_H X := (G \times X)/[ \ (g \phi(h), x) \sim (g, h x) \mid h \in H] \\
            ( f : X \to Y ) & \longmapsto  ( \id_G \times_H f : G \times_H X \to G \times_H Y )
        \end{align*}
        Which are adjunctions:
        \[\begin{tikzcd}
            {H\mathbf{-TOP}} & {} & {G\mathbf{-TOP}}
            \arrow[""{name=0, anchor=center, inner sep=0}, "{G\times_H-}", curve={height=-12pt}, from=1-1, to=1-3]
            \arrow[""{name=1, anchor=center, inner sep=0}, "{\phi^*}", curve={height=-12pt}, from=1-3, to=1-1]
            \arrow["\dashv"{anchor=center, rotate=-90}, draw=none, from=0, to=1]
        \end{tikzcd}\]

    \end{thm}

    \begin{prf}
        By $G$-equivariance, $f$ is determined uniquely by its restriction $f|_{\phi(H) \times_H X}$.
        And $\tilde{f} : X \to \phi^*(Y)$ uniquely determine a map $\phi(H) \times_H X \to Y$.
        \[\begin{tikzcd}
            {(G \times_H X} && {Y)} && {(X = \phi(H) \times_H X} && {Y)} \\
            {(g\phi(h),x)} && {g\phi(h)f(x)} && {(\phi(h),x)=(e ,hx)} && {\phi(h)x} \\
            &&&& X && {\phi^*(Y)} \\
            &&&& {}
            \arrow["f", from=1-1, to=1-3]
            \arrow["{f|_{H \times_H X}}", from=1-5, to=1-7]
            \arrow[maps to, from=2-1, to=2-3]
            \arrow["\in"{marking}, draw=none, from=2-1, to=1-1]
            \arrow["\in"{marking}, draw=none, from=2-3, to=1-3]
            \arrow["\in"{marking}, draw=none, from=2-5, to=1-5]
            \arrow["\in"{marking}, draw=none, from=2-7, to=1-7]
            \arrow[maps to, from=2-5, to=2-7]
            \arrow["\tilde{f}", from=3-5, to=3-7]
            \arrow[shorten <=11pt, shorten >=11pt, maps to, from=1-3, to=1-5]
            \arrow[shift right=18, shorten <=20pt, shorten >=20pt, Rightarrow, no head, from=1-7, to=3-7]
        \end{tikzcd}\]
        Naturality:
        \[\begin{tikzcd}
            & {(G \times_H X'} & {G \times_H X} & Y & {Y')} & {} \\
            & {(g,hx')} & {(g,hf'(x))} & {g\phi(h)f(f'(x))} & {g\phi(h)f''(f(f'(x)))} \\
            {} && \leftrightarrows &&& {} \\
            & {(X'} & {X = \phi(H) \times_H X} & {\phi^*(Y)} & {\phi^*(Y'))} \\
            & {(hx')} & {(\phi(h),f'(x'))=(e ,hf'(x'))} & {\phi(h)f(f'(x))} & {\phi(h)f''(f(f'(x)))} &&& {}
            \arrow["f", from=1-3, to=1-4]
            \arrow["{f|_{H \times_H X}}", from=4-3, to=4-4]
            \arrow[maps to, from=2-3, to=2-4]
            \arrow["\in"{marking}, draw=none, from=2-3, to=1-3]
            \arrow["\in"{marking}, draw=none, from=2-4, to=1-4]
            \arrow["\in"{marking}, draw=none, from=5-3, to=4-3]
            \arrow["\in"{marking}, draw=none, from=5-4, to=4-4]
            \arrow[maps to, from=5-3, to=5-4]
            \arrow["{\id_G \times_H f'}", from=1-2, to=1-3]
            \arrow["\in"{marking}, draw=none, from=2-2, to=1-2]
            \arrow[maps to, from=2-2, to=2-3]
            \arrow["{f''}", from=1-4, to=1-5]
            \arrow["\in"{marking}, draw=none, from=2-5, to=1-5]
            \arrow[maps to, from=2-4, to=2-5]
            \arrow["{f'}", from=4-2, to=4-3]
            \arrow["\in"{marking}, draw=none, from=5-2, to=4-2]
            \arrow[maps to, from=5-2, to=5-3]
            \arrow["{\phi^*(f'')}", from=4-4, to=4-5]
            \arrow[from=5-4, to=5-5]
            \arrow["\in"{marking}, draw=none, from=5-5, to=4-5]
        \end{tikzcd}\]
        \qed
    \end{prf}

    \begin{prop}
        If $(X,A)$ is relative $G$-equivariant CW-complex,
        then $(X/G , A/G)$ is relative CW-complex with $n$-skeleton $X^n/G$.
    \end{prop}

    \begin{prf}
        \[\begin{tikzcd}
            {\coprod_{i\in I_n} S^{n-1}} & {X^{n-1}/G} \\
            {\coprod_{i\in I_n} D^n} & {X^n/G}
            \arrow[hook, from=1-1, to=2-1]
            \arrow[from=2-1, to=2-2]
            \arrow[from=1-1, to=1-2]
            \arrow[from=1-2, to=2-2]
        \end{tikzcd}\]
        Is still pushout since $-/G = 1 \times_G -$, and left adjoint preserves
        colimits.\\
        \qed
    \end{prf}

    Since $k(\prod_n X)$ have CW-complex structure,
    and $S_n$ (as a discrete group) acts cellularly on it,
    $k(\prod_n X)$ is an $S_n$-equivariant CW-complex.
    Therefore $\SP^n X = k(\prod_n X)/S^n$ is CW-complex.
    Since  $\SP X = \colim \{ \SP^1 X \hookrightarrow \cdots \hookrightarrow  \SP^n X \hookrightarrow \SP^{n+1} X \hookrightarrow \cdots \}$,
    $\SP X$ is also a CW-complex.\\

    Pointed homotopy $h : X \times I \to Y$ induces
    \begin{align*}
        h_n : \SP^n X \times I & \to \SP^{n}Y\\
            (\{x_1, \dots, x_n\} , t) & \mapsto \{h(x_1,t), \dots, h(x_n,t)\}
    \end{align*}
    which induces $\SP h : \SP X \times I \to \SP Y$.\\


    Then we observe:\\
    $f \simeq g$ implies $\SP f \simeq \SP g$,\\
    $e : X \to Y$ is homotopy equivalence implies $\SP e : \SP X \to \SP Y$ is,\\
    $X$ is contractible implies $\SP^n X$ and then $\SP X$ is.


    \begin{thm}
        (Dold-Thom Theorem)\label{hyp:Dold-Thom}\\
        If $X$ is $T_2$ space and $A$ is closed path-connected subspace of $X$,
        and there is neighborhood $V$ \hyperref[hyp:deformable]{deformable} to $A$ in $X$.\\
        Then the quotient map $q : X \to X/A$ induces quasi-fibration
        $\SP q : \SP X \to \SP (X/A)$, which satisfy
        $\forall x \in \SP (X/A), \ \inv{(\SP q)} \{x\} \simeq  \SP A $.

    \end{thm}

    \begin{cor}
        If $X$ , $Y$ are $T_2$ spaces and $Y$ is connected, $f : X \to Y$.
        Then consider $X \to Y \to C_f \to \Sigma X$,
        the map $p : C_f \to \Sigma X$ induces quasi-fibration
        $\SP p : \SP C_f \to \SP (\Sigma X)$ with fiber $\SP Y$.
    \end{cor}

    \begin{cor}
        If $X$ is $T_2$ and path-connected, then for any $q\geq 0$,
        there is $\pi_{q+1}(\SP (\Sigma X)) \cong \pi_q (\SP X)$.
    \end{cor}

    \begin{prf}
        $CX$ is contractible implies $\SP CX$ is contractible,
        use the exat homotopy sequence of quasi-fibration to see:
        \[\begin{tikzcd}
            {} & {\pi_{q+1}(\SP CX)} & {\pi_{q+1}(\SP \Sigma X)} & {\pi_q (\SP X)} & {\pi_q(\SP CX)} & {}
            \arrow[from=1-2, to=1-3]
            \arrow["\partial"', "\cong", from=1-3, to=1-4]
            \arrow[from=1-1, to=1-2]
            \arrow[from=1-4, to=1-5]
            \arrow[from=1-5, to=1-6]
        \end{tikzcd}\]

        \qed
    \end{prf}

    \begin{note}
        The inverse of the isomorphism $\partial$ above is given by
        $$
        [S^q , \SP X] \ni [g] \mapsto [\Sigma g] \in [S^{q+1}, \Sigma \SP X]
        $$
        ($\Sigma \SP X \cong \SP \Sigma X$).
        Because $\partial$ is given by:
        \[\begin{tikzcd}
            {\pi_q(\SP \Sigma X)} & {\pi_q(\SP CX, \SP X)} & {\pi_{q-1}(\SP X)} \\
            {[f]} & {[\hat{f}]} & {[\hat{f}|_{S^{q-1}}]} \\
            {[p \circ Cg] = [\Sigma g]} & {[Cg]} & {[g]}
            \arrow[from=1-1, to=1-2]
            \arrow[from=1-2, to=1-3]
            \arrow[maps to, from=2-1, to=2-2]
            \arrow[maps to, from=2-2, to=2-3]
            \arrow["\ni"{marking}, draw=none, from=1-1, to=2-1]
            \arrow["\ni"{marking}, draw=none, from=1-2, to=2-2]
            \arrow["\ni"{marking}, draw=none, from=1-3, to=2-3]
            \arrow[maps to, from=3-3, to=3-2]
            \arrow[maps to, from=3-2, to=3-1]
        \end{tikzcd}\].
        \qed
    \end{note}

    \begin{cor}
        \label{hyp:quasi-fibration-SP(XUAxI)-to-SP(XUCA)}
        If $X$ is $T_2$ space and $A$ is path-connected subspace of $X$,
        then the canonical map
        $\SP (X \cup (A \times I)) \to \SP (X \cup C A)$ 
        is a quasi-fibration with fiber $\SP A$.
    \end{cor}

    \begin{thm}
        \label{hyp:quasi-fibration-SPX-to-SP(X/A)}
        If $X$ is $T_2$ space and $A$ is path-connected subspace of $X$,
        and $A \hookrightarrow X$ is a cofibration.\\
        Then the quotient map $q : X \to X/A$ induces quasi-fibration
        $\SP q : \SP X \to \SP (X/A)$, which satisfy
        $\forall x \in \SP (X/A), \ \inv{(\SP q)} \{x\} \simeq  \SP A $.
    \end{thm}

    \begin{prf}
        If $A \hookrightarrow X$ is cofibration,
        then $X \cup C A \simeq X/A $ and $X \cup (A \times I) \simeq X$.
        \qed
    \end{prf}

    \begin{prop}
        The inclusion $S^1 \to \SP S^1$ is homotopy equivalence,
        therefore $\pi_q(S^1) \cong \pi_q(\SP S^1)$.
    \end{prop}
    \begin{prf}
        $S^1 \simeq S^2 - \{0,\infty\}$\\
        $\SP^n S^2 = \{\{a_1,\dots, a_n\} \mid a_i \in \bbC \cup \{\infty\}\} = \{\prod_{\{a_1,\dots, a_n\}} (z-a_i) \mid a_i \in \bbC \cup \{\infty\} \}$
        where $(z - \infty) := 1$
        $\SP^n S^2 = \{f \in \bbC [z] - \{ 0 \} \mid \deg(f) \leq n \} = \bbC \bbP ^n$\\
        $$
        \SP^n (S^2 - \{0,\infty\}) = \{f \in \bbC [z] - \{ 0 \} \mid \deg(f) \leq n, f_n \neq 0, f_0 \neq 0 \} = 
        \bbC^n - \bbC^{n-1} \times 0 = \bbC^{n-1} \times (\bbC - 0)
        $$
        it have the same homotopy type of $S^1$
    \end{prf}

    \begin{cor}
        \label{hyp:SP-Sn-is-K(Z,n)}
        $\pi_q(\SP S^n) = \bbZ $ if $q = n$, otherwise $\pi_q(\SP S^n) = 0$.
        (use corollary of \ref{hyp:Dold-Thom} to see $\pi_{q+1}(\SP \Sigma X) \cong \pi_q (\SP X)$)
    \end{cor}


    \section{Homology Groups}

    \subsection{Reduced Homology Groups}

    \begin{defn}
        For a path-connected pointed CW-complex $X$,
        define its \textbf{$n$-th reduced homology group} for $n \geq 0$:\\
        $$
        \waveH_n(X) := \pi_n(\SP X)
        $$
    \end{defn}

    \begin{note}
        All reduced homology groups are abelian since
        $\waveH_n(X) \cong \waveH_{n+1}(\Sigma X)$.
        Thus, we can extend the definition above
        to those $X$ which does not necessarily be path-connected.\\
    \end{note}

    As $\SP$, $\waveH_n$ also satisfy functoriality.
    Furthermore, $\waveH_n$ maps homotopic maps $f \simeq g$ to identical maps $f_* = g_*$.
    ($\SP$ maps homotopic maps to homotopic maps)\\

    Exact Property:
    \begin{prop}
        For any pointed map between CW-complexes $f : X \to Y$,
        we have an exact sequence:
        $$
        \waveH_n(X) \xrightarrow{f_*} \waveH_n(Y) \xrightarrow{i_*} \waveH_n(C_f)
        $$
        where $C_f$ is the mapping cone of $f$, $i : Y \hookrightarrow C_f$.
    \end{prop}

    \begin{prf}
        $Z_f$ := $Y \cup_f (X \times I) / \{ x_0 \} \times I$ is the \textbf{reduced mapping cylinder}
        of $f$.\\
        $q : Z_f \to C_f $ is defined by
        \begin{align*}
            y & \mapsto y\\
            \overline{(x,t)}^{Z_f} & \mapsto \overline{(x,t)}^{C_f}
        \end{align*}
        By \hyperref[hyp:Dold-Thom]{Dold-Thom theorem},
        the induced map $\SP q$ is quasi-fibration $\SP Z_f \to \SP C_f $ with fiber $\SP X$.
        By definition of quasi-fibration, we have
        $$
        \pi_n(\SP X) \cong \waveH_n(X) \xrightarrow{f_*} \pi_n(\SP Z_f) \cong \waveH_n(Y) \xrightarrow{i_*} \pi_n(\SP C_f) = \waveH_n(C_f)
        $$
        \qed
    \end{prf}

    \begin{prop}
        \label{hyp:Sn-is-not-retract-of-Dn+1} There does not exist retraction $r : \bbD^n \to S^{n-1} $.
    \end{prop}

    \begin{prf}
        $id = r \circ i : \bbS^{n-1} \to \bbD^n \to \bbS^{n-1}$
        induces
        $$
        id_* = r_* \circ i_* : \bbZ \cong \waveH_{n-1}\bbS^{n-1} \to \waveH_{n-1}\bbD^n  \cong 0 \to \waveH_{n-1}\bbS^{n-1} \cong \bbZ
        $$
        which lead to contradiction.
        \qed
    \end{prf}

    \begin{thm}
        Fix-point theorem:\\
        If $f : \bbD^n \to \bbD^n$ is continuous,
        then exist $x_0 \in \bbD^n$ such that
        $x_0 = f(x_0)$.
    \end{thm}

    \begin{prf}
        (non-constructive)
        No such $x_0$ implies $\forall x \in \bbD^n , f(x) \neq x$
        therefore, we can construct continuous retraction $r : \bbD^n \to \bbS^{n-1}$
        by\\ $r(x)$:= the intersection of ``ray starting from $f(x)$ to $x$'' and $\bbS^{n-1}$.
        Contradict to \ref{hyp:Sn-is-not-retract-of-Dn+1}.
    \end{prf}

    \begin{defn}
        \label{hyp:homology-group-defined-using-SP}
        Let $(X,A)$ be an CW-pair, define the
        \textbf{$n$-th homology group} for $n \in \bbN$ of $(X,A)$ be:\\
        $$
        H_n(X,A)  :=  \waveH_n(X \cup CA)
        $$
        And for single space:\\
        $$
        H_n(X) := H_n(X, \emptyset) = \waveH(X + 1)
        $$
        where $X + 1 := X \sqcup *$.
    \end{defn}

    \begin{note}
        Map between CW-pair $f : (X,A) \to (Y,B)$,
        induces map $\bar{f} : X \cup CA \to Y \cup CB$
        defined by $(x,t) \mapsto (f(x),t)$,
        which induces $f_* : \waveH_n(X \cup CA) \to \waveH_n(Y \cup CB)$ for any $n \in \bbN$.
    \end{note}

    \subsection{Axioms for Homology}

    \begin{defn}
        \label{hyp:Ordinary-Homology-Theory}
        A (Ordinary) Homology Theory (on $\mbf{TOP}$ with coefficient $G \in \mbf{Ab}$) is
        functors $\{H_n(-,-;G) : \mbf{TOP(2)} \to \mbf{Ab}\}_{n \in \bbZ}$,\\
        with natural transformations ${\partial_{n,(X,A)} : H_n(X,A;G) \to H_n(A,\emptyset;G)}$
        (called connecting homomorphism)\\
        satisfying following axioms:\\
        \begin{itemize}
            \item \textbf{Dimension}:\\
                $H_0 (\ast, \emptyset;G) = G$,
                for any $n \neq 0$, $H_n (\ast, \emptyset;G) = 0$.\\
            \item \textbf{Weak Equivalence}:\\
                Weak equivalence $f : (X,A) \to (Y,B)$
                induces isomorphism
                $$
                f_* : H_*(X,A;G) \to H_*(Y,B;G)
                $$
            \item \textbf{Long Exact Sequence}:\\
                For any $(X,A) \in \mbf{TOP(2)}$, maps $A \hookrightarrow X$
                and $(X,\emptyset) \to (X,A)$ induce a long exact sequence together
                with $\partial$:
                $$
                \cdots \to H_{q+1}(A;G) \to H_{q+1}(X;G) \to H_{q+1}(X,A;G) \to H_q(A;G) \to \cdots
                $$
                where $H_n(X;G) := H_n(X,\emptyset;G)$.\\
            \item \textbf{Additivity}:\\
                If $(X,A) = \coprod_\lambda (X_\lambda, A_\lambda) $ in $\mbf{TOP(2)}$,
                then inclusions $i_\lambda : (X_\lambda, A_\lambda) \to (X,A)$
                induces isomorphism
                $$
                (\bigoplus i_{\ast ,\lambda})  : \bigoplus_{\lambda} H_*(X_\lambda,A_\lambda;G) \cong H_*(X,A;G)
                $$
            \item \textbf{Excision}:\\
                If $(X;A,B)$ is an \textbf{excisive triad} (that is, $X = \interior{A} \cup \interior{B}$),
                then inclusion $(A,A \cap B) \hookrightarrow (X,B)$
                induces isomorphism
                $$
                H_*(A,A\cap B ; G) \cong H_*(X,B;G)
                $$\\
        \end{itemize}

    \end{defn}

    \begin{note}
        An equivalent form of Excision Axiom:\\
        If $(X,A) \in \mbf{TOP(2)}$, $U$ is subspace of $A$ and $\ol{U} \subseteq \interior{A}$,
        then inclusion $ i : (X - U, A - U) \hookrightarrow (X,A) $
        induces isomorphism
        $$
        i_* : H_*(X-U, A-U;G) \to H_*(X,A;G)
        $$\\
    \end{note}

    There is a critical criterion about weak homotopy equivalence between excisive triads,
    we prove lemmas first:

    \begin{lem}
        \label{hyp:pushout-preserve-dr}
        For
        \[\begin{tikzcd}
            Z & Y \\
            X & {X \cup_Z Y}
            \arrow["i"', from=1-1, to=2-1]
            \arrow["f", from=1-1, to=1-2]
            \arrow["{i_*}", from=1-2, to=2-2]
            \arrow["{f_*}"', from=2-1, to=2-2]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
        \end{tikzcd}\]
        if $D$ is deformation retract of X and $Z \subseteq D \subseteq X $,
        then $D \cup_Z Y $ is deformation retract of $X \cup_Z Y$.
    \end{lem}

    \begin{prf}
        Let $h : \id_X \simeq r \circ i$ where $r$ is the deformation retraction
        $X \to D$.
        Define $h_* : \id_{X \cup_Z Y} \simeq (i \cup_Z \id_Y) \circ (r \cup_Z \id_Y)$
        \begin{align*}
            h_* : (X \cup_Z Y) \times I & \to X \cup_Z Y\\
            (x,t) & \mapsto f_*(h(x,t))\\
            (y,t) & \mapsto i_*(y)
        \end{align*}

        Observe that $(X \cup_Z Y) \times I = (X \times I) \cup_{Z \times I} (Y \times I)$,
        check that $h^*$ is continuous:

        \[\begin{tikzcd}
            {Z \times I} & {Y \times I} \\
            {X \times I} & {(X\cup_Z Y) \times I} & Y \\
            & X & {X \cup_Z Y}
            \arrow[from=1-1, to=2-1]
            \arrow[from=1-1, to=1-2]
            \arrow[from=2-1, to=2-2]
            \arrow[from=1-2, to=2-2]
            \arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-2, to=1-1]
            \arrow["{\id_{\id_Y}}", from=1-2, to=2-3]
            \arrow["h"', from=2-1, to=3-2]
            \arrow["{i_*}"', from=2-3, to=3-3]
            \arrow["{f_*}"', from=3-2, to=3-3]
            \arrow["{h_*}"', from=2-2, to=3-3]
        \end{tikzcd}\]
        \qed
    \end{prf}

    \begin{lem}
        \label{hyp:double-mapping-cylinder-homotopy-pushout}
        For maps $i : C \to A$, $j : C \to B$
        define the double mapping cylinder
        $M(i,j) := A \cup_{C \times \{0\}} C \times I \cup_{C \times \{1\}} B$.
        If $i$ is closed cofibration,
        then the quotient map
        \begin{align*}
            q : M(i,j) & \to A \cup_C B\\
            a & \mapsto a\\
            b & \mapsto b\\
            (c,t) &  \mapsto c\\
        \end{align*}
        is a homotopy equivalence.
    \end{lem}

    \begin{prf}
        \[\begin{tikzcd}
            C & B \\
            A & {A \cup_C B}
            \arrow["i"', hook, from=1-1, to=2-1]
            \arrow[from=1-1, to=1-2]
            \arrow[from=1-2, to=2-2]
            \arrow["{i_A}"', from=2-1, to=2-2]
        \end{tikzcd}\]
        The canonical quotient $r : M_{i_A} \to A \cup_C B$ is a deformation retraction with homotopy:
        \begin{align*}
            h : (B \cup_{C \times 0} (A \times I)) \times I & \to B \cup_{C \times 0} (A \times I) = M_{i_A}\\
                (a,t,s) & \mapsto (a,(1-s)t)\\
                (b,s) & \mapsto b
        \end{align*}
        Observe that $C \times I \cup_C A \times \{1\}$ is a deformation retract of $A \times I$,
        since $i : C \to A$ is closed cofibration.\\
        Then we have $ M(i,j) =  B \cup_{C \times \{0\}}  (C \times I \cup_{C \times \{1\}} A \times \{1\})$
        is a deformation retract of $ B \cup_{C \times \{0\}} A\times I = M_{i_A}$.
        (use lemma \ref{hyp:pushout-preserve-dr})\\
        Finally, an easy check shows that $M(i,j) \to M_{i_A} \xrightarrow{r} A \cup_C B $
        is identical to $q$.\\
        \qed
    \end{prf}

    \begin{thm}
        \label{hyp:excisive-triads-weak-equivalence}
        For excisive triads $(X;X_1,X_2)$, $(X';X'_1,X'_2)$
        and map $e : X \to X'$,
        if
        \begin{align*}
            e|_{X_1} : X_1 & \to X'_1\\
            e|_{X_2} : X_2 & \to X'_2\\
            e|_{X_3} : X_3 & \to X'_3
        \end{align*}
        
        are weak equivalences, (where $X_3 := X_1 \cap X_2,\  X'_3 := X'_1 \cap X'_2$)
        then $e$ is.
    \end{thm}

    \begin{prf}
        Use an important \hyperref[hyp:criterion-HELP-Dn+1,Sn]{criterion} of 
        weak homotopy equivalence,
        it suffices to show forall $n \in \bbN$,
        any commutative diagram below:
        \[\begin{tikzcd}
            {S^n} & {D^{n+1}} \\
            X & {X'}
            \arrow["i", hook, from=1-1, to=1-2]
            \arrow["g"', from=1-1, to=2-1]
            \arrow["e"', from=2-1, to=2-2]
            \arrow["f", from=1-2, to=2-2]
        \end{tikzcd}\]
        can be filled like:
        \[\begin{tikzcd}
            {S^n} & {D^{n+1}} \\
            {X} & {X'}
            \arrow["i", hook, from=1-1, to=1-2]
            \arrow["g"', from=1-1, to=2-1]
            \arrow["e"', from=2-1, to=2-2]
            \arrow[""{name=0, anchor=center, inner sep=0}, "f", from=1-2, to=2-2]
            \arrow["{g^+}"', from=1-2, to=2-1]
            \arrow["h", shorten <=8pt, shorten >=14pt, Rightarrow, from=0, to=2-1]
        \end{tikzcd}\]
        whose upper triangle commutes.\\

        Let
        \begin{align*}
            A_1:= g^{-1}(X-\interior{X_1}) & \cup f^{-1}(X' - \interior{X'_1})\\
            A_2:= g^{-1}(X-\interior{X_2}) & \cup f^{-1}(X' - \interior{X'_2})
        \end{align*}
        which are disjoint closed subsets of $D^{n+1}$.
        Choose CW-complex structure on $D^{n+1}$ 
        such that for each $n$-cell $\sigma_i$,
        $\ol{\sigma_i} \cap (A_1 \cup A_2) = \ol{\sigma_i} \cap A_1 \text{ or } \ol{\sigma_i} \cap A_2$.
        Now define
        \begin{align*}
            K_1:= \bigcup \{ \ol{\sigma_i} \mid g(\ol{\sigma_i} \cap S^n) \subseteq \interior{X_1} \text{ and } f(\ol{\sigma_i}) \subseteq \interior{X'_1} \} & = \bigcup \{ \ol{\sigma_i} \mid \ol{\sigma_i} \cap A_1 = \emptyset \}\\
            K_2:= \bigcup \{ \ol{\sigma_i} \mid g(\ol{\sigma_i} \cap S^n) \subseteq \interior{X_2} \text{ and } f(\ol{\sigma_i}) \subseteq \interior{X'_2} \} & = \bigcup \{ \ol{\sigma_i} \mid \ol{\sigma_i} \cap A_2 = \emptyset \}
        \end{align*}
        which are subcomplexes of $D^{n+1}$ and satisfy $K_1 \cup K_2 = D^{n+1}$.
        By \hyperref[hyp:HELP]{HELP}, we have:
        \[\begin{tikzcd}
            {S^n \cap K_1 \cap K_2} & {K_1 \cap K_2} \\
            {X_1 \cap X_2} & {X'_1 \cap X'_2}
            \arrow["i", from=1-1, to=1-2]
            \arrow["{g|_{K_1 \cap K_2}}"', from=1-1, to=2-1]
            \arrow[""{name=0, anchor=center, inner sep=0}, "{f|_{K_1\cap K_2}}", from=1-2, to=2-2]
            \arrow["{e|_{X_1 \cap X_2}}"', from=2-1, to=2-2]
            \arrow["{g_0}"', from=1-2, to=2-1]
            \arrow["{h_0}", shorten <=13pt, shorten >=13pt, Rightarrow, from=0, to=2-1]
        \end{tikzcd}\]
        such that $h_0$ is $f|_{K_1 \cap K_2} \simeq e \circ g_0 \rel (S^n \cap K_1 \cap K_2)$.
        Apply HELP to:
        \[\begin{tikzcd}
            {(S^n \cup K_1) \cap K_2} & {K_2} && {(S^n \cup K_2) \cap K_1} & {K_1} \\
            {X_2} & {X'_2} && {X_1} & {X'_1}
            \arrow["i_2", from=1-1, to=1-2]
            \arrow["{f|_{K_2}}", from=1-2, to=2-2]
            \arrow[from=2-1, to=2-2]
            \arrow["{g_{K_2}}"', from=1-1, to=2-1]
            \arrow["{h_{K_2}}", shorten <=10pt, shorten >=10pt, Rightarrow, from=1-2, to=2-1]
            \arrow["i_1", from=1-4, to=1-5]
            \arrow["{g_{K_1}}"', from=1-4, to=2-4]
            \arrow["{f|_{K_1}}", from=1-5, to=2-5]
            \arrow[from=2-4, to=2-5]
            \arrow["{h_{K_1}}", shorten <=10pt, shorten >=10pt, Rightarrow, from=1-5, to=2-4]
        \end{tikzcd}\]
        where\\
        $g_{K_i}$ are defined by $g_{K_i}|_{S^n \cap K_i} :=  g|_{{S^n \cap K_i}} $
        and $g_{K_i}|_{K_1 \cap K_2} :=  g_0 $,\\
        $h_{K_2}$ are defined by ($h_{K_1}$ is similar):
        \begin{align*}
        h_{K_2} : ((S^n \cup K_1) \cap K_2 ) \times I & \to X'_2\\
            (x,t) & \mapsto
            \begin{cases}
                e(g(x)) \quad x \in S^n \cap K_2 \\
                h_0(x,t) \quad x \in K_1 \cap K_2
            \end{cases}
        \end{align*}
        We get:
        \[\begin{tikzcd}
            {(S^n \cup K_1)\cap K_2} & {K_2} && {(S^n \cup K_2) \cap K_1} & {K_1} \\
            {X_2} & {X'_2} && {X_1} & {X'_1}
            \arrow[from=1-1, to=1-2]
            \arrow["{g_{K_2}}"', from=1-1, to=2-1]
            \arrow[""{name=0, anchor=center, inner sep=0}, "{f|_{K_2}}", from=1-2, to=2-2]
            \arrow["{e|_{X_2}}"', from=2-1, to=2-2]
            \arrow["{g_2}"', from=1-2, to=2-1]
            \arrow[from=1-4, to=1-5]
            \arrow[""{name=1, anchor=center, inner sep=0}, from=1-5, to=2-5]
            \arrow["{g_{K_1}}"', from=1-4, to=2-4]
            \arrow["{e|_{X_1}}"', from=2-4, to=2-5]
            \arrow["{g_1}"', from=1-5, to=2-4]
            \arrow["{h_2}", shorten <=13pt, shorten >=19pt, Rightarrow, from=0, to=2-1]
            \arrow["{h_1}", shorten <=13pt, shorten >=19pt, Rightarrow, from=1, to=2-4]
        \end{tikzcd}\]
        
        Define $g^+$ and $h : f \simeq g \rel {S^n}$ by $g^+|_{K_i} := g_i$
        and $h|_{K_i \times I} := h_i$.\\
        $h|_{S^n \times I} = (e \circ g) \times \id_I$ ($h$ is $\rel S^n$)
        since $h_i(-,t)|_{S^n \cap K_i} = h_{K_i}(-,t)|_{S^n \cap K_i} = e \circ g|_{S^n \cap K_i}$.\\
        \qed
    \end{prf}

    \begin{note}
        The proof above can be easily modified to case each weak equivalence appear in the statement is an $n$-equivalence.\\
    \end{note}

    Following theorem allow us to use CW-triads to approximate excisive triads:

    \begin{thm}
        \label{hyp:CW-triad-approx-excisive-triad}
        For any excisive triad $(X;A,B)$,
        there is a CW-triad $(\widetilde{X}; \widetilde{A}, \widetilde{B})$
        (A CW-triad $(X;A,B)$ is $X$ and its subcomplex $A,B$ such that $A \cup B = X$)
        and a map $r : \widetilde{X} \to X$
        such that
        \begin{align*}
            r|_{\wtl{A}} : \wtl{A} & \to A\\
            r|_{\wtl{B}} :  \wtl{B} & \to B \\
            r|_{\wtl{C}} : \wtl{C} & \to C\\
            r  : \wtl{X} & \to X
        \end{align*}
        are all weak homotopy equivalences (where $\wtl{C} := \wtl{A} \cap \wtl{B}$, $C := A \cap B$).
        Furthermore, such $r$ is natural up to homotopy.
    \end{thm}

    \begin{prf}
        Choose a CW-approximation $r_C : \wtl{C} \to C$
        and extend it to $r_A : \wtl{A} \to A$, $r_B : \wtl{B} \to B$.
        $\wtl{X} := \wtl{A} \cup_{\wtl{C}} \wtl{B}$.
        $i : \wtl{C} \to \wtl{A} $ and $j : \wtl{C} \to \wtl{B}$
        are closed cofibrations,
        by lemma \ref{hyp:double-mapping-cylinder-homotopy-pushout}
        we have homotopy equivalence $q : M(i,j) \to \wtl{X}$,
        which induces homotopy equivalence of triads:
        \begin{align*}
            q : M(i,j) & \to \wtl{X}\\
            q| : \wtl{A} \cup (\wtl{C} \times [0,\frac{2}{3})) & \to \wtl{A}\\
            q| : \wtl{B} \cup (\wtl{C} \times (\frac{1}{3},1]) & \to \wtl{B}\\
        \end{align*}
        then we can deduce that
        $r \circ q$
        is a weak homotopy equivalence by theorem \ref{hyp:excisive-triads-weak-equivalence}.
        Consquently, $r$ is weak homotopy equivalence.
        $r$ is natural up to homotopy since each CW-approximation $r_C, r_A, r_B$ is.\\
        \qed
    \end{prf}
    
    Then we have:
    \begin{defn}
        A (Ordinary) Homology Theory on  CW-complexes with coefficient $G \in \mbf{Ab}$ is
        functors $\{H_n(-,-;G) : \textbf{CW-pairs} \to \mbf{Ab}\}_{n \in \bbZ}$,\\
        with natural transformations ${\partial_{n,(X,A)} : H_n(X,A;G) \to H_n(A,\emptyset;G)}$
        (called connecting homomorphism)\\
        satisfying \hyperref[hyp:Ordinary-Homology-Theory]{axioms}
        with the excision axiom changed to:
        \begin{itemize}
            \item \tbf{Excision}:\\ 
                If (X;A,B) is an \tbf{CW-triad} (that is $X = A \cup B$ for subcomplexes $A$ and $B$)
                then the inclusion $(A,A \cap B) \hookrightarrow (X,B)$
                induces isomorphism
                $$
                H_*(A,A\cap B ; G) \cong H_*(X,B;G)
                $$\\
        \end{itemize}
    \end{defn}

    \begin{prop}
        The homology groups defined in definition \ref{hyp:homology-group-defined-using-SP}
        with $H_{-n}(X) := 0$
        is a ordinary homology theory on CW-complexes with coefficient $\bbZ$.
    \end{prop}

    \begin{prf}
        \text{ }\\
        \begin{itemize}
            \item Dimension: by \hyperref[hyp:SP-Sn-is-K(Z,n)]{a corollary}, $H_q(\ast, \emptyset) = \pi_q(\SP S^0) =
            \begin{cases}
                \bbZ \quad q = 0\\
                0  \quad q \geq 1
            \end{cases}$.
            \item Weak Equivalence: $\SP$ preserves weak equivalence.
            \item Long Exact Sequence: use a \hyperref[hyp:quasi-fibration-SP(XUAxI)-to-SP(XUCA)]{corollary}
                of Dold-Thom theorem.
            \item Additivity:
                For index set $\Lambda$, $P := \{S \mid S \subseteq \Lambda \}$.\\
                Then define $Y_S := \bigvee_{\lambda \in S} X_\lambda \cup CA_\lambda = (\coprod_{\lambda \in S} X_\lambda) \cup C (\coprod_{\lambda \in S} A_\lambda)$,\\
                and use fact that \hyperref[hyp:SP-commute-with-directed-colimit]{$\SP$ commutes with directed colimit}, we have\\
                $\bigvee_{\lambda \in \Lambda} \SP (X_\lambda \cup CA_\lambda) = \colim_{S \in P} \SP Y_S \approx  \SP (\colim_{S \in P} Y_S) = \SP ((\coprod_{\lambda \in \Lambda} X_\lambda) \ \cup \ C (\coprod_{\lambda \in \Lambda} A_\lambda)) = \SP ( X \cup CA)$.\\
                Which induces $\bigoplus_{\lambda \in \Lambda} \waveH_n(X_\lambda \cup C A_\lambda) \cong \pi_n (\bigvee_{\lambda \in \Lambda} \SP (X_\lambda \cup CA_\lambda)) \cong \pi_n(\SP (X \cup CA)) = \waveH_n(X \cup CA)$.
            \item Excision: For CW-triad $(X;A,B)$,
                $A/(A \cap B) \approx X/B$.
                Apply theorem \ref{hyp:quasi-fibration-SPX-to-SP(X/A)} to $(Y \cup CZ, CZ)$ to show that
                $H_n(Y,Z) \cong \waveH_n(Y/Z)$.\\
        \end{itemize}
        \qed
    \end{prf}

    \subsection{Cellular Homology}

    \begin{lem}
        \label{hyp:homology-of-suspension}
        For an ordinary homology theory $H_*(-,-;G)$,
        if $X$ is a CW-complex,
        then for any $n \in \bbZ$
        $H_n(X) \cong \waveH_{n+1}(\Sigma X)$.
    \end{lem}

    \begin{prf}
        Apply long exact sequence axiom on $(CX,X)$:
        ($H_*(CX) = 0$ due to  weak equivalence axiom):
        $$
            0 \cong H_{n+1}(CX) \to H_{n+1}(CX,X) \xrightarrow{\cong} H_n(X) \to H_n(CX) \cong 0
        $$
        Use excision axiom and weak equivalence axiom, we have:
        $$
        H_*(CX,X) \cong H_*(CX\cup CX, CX ) \cong H_*(\Sigma X,\ast)
        $$
        \qed
    \end{prf}


    \begin{prop}
    For an ordinary homology theory $H_*(-,-;G)$,
    if $X$ is a pointed CW-complex with $X^{-1} := \ast$,
    then for any $n \geq 0$
    \begin{align*}
    H_q(X^n,X^{n-1}) \cong \waveH_q(X^n/X^{n-1}) \cong
        \begin{cases}
        \bigoplus_{i \in I_n} G \quad & q = n\\
        0 \quad & q \neq n
        \end{cases}
    \end{align*}
    where $I_n$ is set of all $q$-cells.
    \end{prop}

    \begin{prf}
        Use additivity axiom and lemma \ref{hyp:homology-of-suspension} to see
        that $H_n(\bigvee S^n) \cong \bigoplus G$
        and
        $H_q(\bigvee S^n) = 0$ for $q \neq n$.
        Use excision axiom and weak equivalence axiom to see
        $$
        H_q(X^n, X^{n-1}) \cong H_q(X^n \cup CX^{n-1}, CX^{n-1}) \cong H_q(X^n/X^{n-1}, \ast) \cong \waveH_q(\bigvee_{i \in I_n} S^n)
        $$
        \qed
    \end{prf}

    \begin{cor}
        \label{hyp:cellularity-of-homology}
        If $H_*(-,-)$ is an ordinary homology theory,
        then for a pointed CW-complex $X$ with $X^{-1} := \ast$, we have:
        \begin{align*}
            \waveH_q(X^n) & = 0  & \text{ for } q > n\\
            H_q(X^n) & \cong H_q(X^{n+1}) \cong H_q(X) & \text{ for } q < n\\
            H_n(X^n) & \xrightarrow{i_*} H_n(X^{n+1}) &  \text{ is epimorphism}
        \end{align*}
        for any $n \geq -1$.
    \end{cor}

    \begin{prf}
        Use long exact sequence of $(X^{n+1},X^n)$:
        \begin{align*}
            \cdots & \to H_{q+1}(X^{n+1},X^n)  \xrightarrow{\partial_{q+1}} H_q(X^{n})
            \xrightarrow{i_*} H_q(X^{n+1}) \to H_q(X^{n+1},X^n) \xrightarrow{\partial_{q}}  H_{q-1}(X^n) \to \cdots\\
            \cdots & \to H_{1}(X^{n+1},X^n) \xrightarrow{\partial_{1}} H_0(X^{n})
            \xrightarrow{i_*} H_0(X^{n+1}) \to H_0(X^{n+1},X^n) 
        \end{align*}
        For $q < n$, $H_q(X^n) \cong H_q(X^{n+1}) \cong \cdots \cong \colim_{i \in \bbN} H_q(X^i)$.\\
        For $q > n$, if $n > -1$, $H_q(X^n) \cong H_q(X^{n-1}) \cong \cdots \cong H_q(X^{-1}) \cong 0$,\\
        if $n = -1$, $\waveH_0(X^{-1}) \cong 0 \cong \waveH_q(X^{-1})$.\\
        For $q = n$, we have following exact:
        \begin{align*}
            \to H_{n+1}(X^{n+1},X^n)  \xrightarrow{\partial_{n+1}} H_n(X^{n})
            \xrightarrow{i_*} H_n(X^{n+1}) \to H_n(X^{n+1},X^n) \cong 0
        \end{align*}
        \qed
    \end{prf}

    \begin{defn}
        For pointed CW-complex $X$ with $X^{-1} := \ast$
        and a ordinary homology theory $H_*(-,-)$
        the \tbf{cellular chain complex} $\{C_n(X), d_n\}$ of $X$
        is defined by:
        \begin{align*}
            C_n(X) & := H_n(X^n,X^{n-1}) \\
            d_n & : H_n(X^n,X^{n-1}) \xrightarrow{\partial_n} H_{n-1}(X^{n-1}) \xrightarrow{i_*} H_{n-1}(X^{n-1}, X^{n-2})
        \end{align*}

    \end{defn}

    \begin{thm}
        For any ordinary homology theory $H_*(-,-)$ and 
        any pointed CW-complex $X$, (with $X^{-1} := \ast$)
        the $n$-th homology of cellular chain complex is isomorphic to $H_n(X)$:
        $$
        H_n(C_*(X)) \cong H_n(X)
        $$
    \end{thm}

    \begin{prf}
        Notice that we have commutative diagram with each straight line exact:
        (use long exact sequence of pairs)
        % https://q.uiver.app/?q=WzAsOSxbMCwyLCJIX3tuKzF9KFhee24rMX0sWF5uKSJdLFsyLDIsIkhfbihYXm4sWF57bi0xfSkiXSxbNCwyLCJIX3tuLTF9KFhee24tMX0sWF57bi0yfSkiXSxbMSwzLCJIX24oWF5uKSA9IFxca2VyKFxccGFydGlhbF9uKSA9IFxca2VyKGRfbikiXSxbMywxLCJIX3tuLTF9KFhee24tMX0pIl0sWzIsMCwiSF97bi0xfShYXntuLTJ9KSBcXGNvbmcgMCJdLFswLDQsIkhfbihYXntuLTF9KVxcY29uZyAwIl0sWzIsNCwiSF9uKFhee24rMX0pID0gXFxjb2tlcihcXHBhcnRpYWxfe24rMX0pIl0sWzMsNSwiSF97bi0xfShYXntuKzF9LFhebilcXGNvbmcgMCJdLFszLDEsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1vbm8ifX19XSxbMSw0LCJcXHBhcnRpYWxfbiJdLFs0LDIsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1vbm8ifX19XSxbNSw0XSxbMCwzLCJcXHBhcnRpYWxfe24rMX0iLDJdLFs2LDNdLFsxLDIsImRfbiJdLFswLDEsImRfe24rMX0iXSxbMyw3LCIiLDAseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJlcGkifX19XSxbNyw4XV0=
        \[\begin{tikzcd}[cells={nodes={font=\small}}, column sep = 0cm, row sep = 0.6cm]
            && {H_{n-1}(X^{n-2}) \cong 0} \\
            &&& {H_{n-1}(X^{n-1})} \\
            {H_{n+1}(X^{n+1},X^n)} && {H_n(X^n,X^{n-1})} && {H_{n-1}(X^{n-1},X^{n-2})} \\
            & {H_n(X^n) = \ker(\partial_n) = \ker(d_n)} \\
            {H_n(X^{n-1})\cong 0} && {H_n(X^{n+1}) = \coker(\partial_{n+1})} \\
            &&& {H_{n-1}(X^{n+1},X^n)\cong 0}
            \arrow[tail, from=4-2, to=3-3]
            \arrow["{\partial_n}", from=3-3, to=2-4]
            \arrow[tail, from=2-4, to=3-5]
            \arrow[from=1-3, to=2-4]
            \arrow["{\partial_{n+1}}"', from=3-1, to=4-2]
            \arrow[from=5-1, to=4-2]
            \arrow["{d_n}", from=3-3, to=3-5]
            \arrow["{d_{n+1}}", from=3-1, to=3-3]
            \arrow[two heads, from=4-2, to=5-3]
            \arrow[from=5-3, to=6-4]
        \end{tikzcd}\]
        \qed
    \end{prf}

    \begin{note}
        If the ordinary homology theory has coefficient $\bbZ$,
        then the $d_n : C_n(X) \to C_{n-1}(X)$
        is given by:
        $$
        \bbZ_i \ni 1_i = e^n_i \mapsto \sum_{j \in I_{n-1}} \alpha^j_{i} e^{n-1}_j
        $$
        where
        $\alpha^j_i$
        is degree of map
        $$
        \beta^j_{i} : S^n \approx \partial e^n_i \xrightarrow{\varphi_i}
        X^{n-1} \to X^{n-1}/X^{n-2} \to \bigvee_{j' \in I_{n-1}} S^{n-1} \xrightarrow{p_j} S^{n-1}
        $$
        where $\varphi_i$ is the characteristic map,
        $p_j$ maps every point not in $S^{n-1}_j$ to $\ast$.
    \end{note}



    \section{Homotopy and Eilenberg-Mac Lane Spaces}

    \subsection{Homotopy Excision Theorem and its Corollary}

    \begin{thm}
        \label{hyp:Homotopy-Excision-Theorem}
        (Blakers–Massey) Homotopy Excision Theorem:\\
        For pointed CW-triad $(X;A,B)$
        such that $C := A \cap B \neq \emptyset$,
        if $(A,C)$ is $(m-1)$-connected and
        $(B,C)$ is $(n-1)$-connected
        where $m \geq 2$, $n \geq 1$.
        Then $i : (A,C) \to (X,B)$ is an $(m+n-2)$-equivalence for pairs.
    \end{thm}

    \begin{note}
        We can replace the "CW-triad" with "excisive triad" in condition
        by theorem \ref{hyp:CW-triad-approx-excisive-triad}.
    \end{note}

    \begin{prf}
        Define (pointed) the triad homotopy group for $q \geq 2$:\\
        $$
        \pi_q(X;A, B) := \pi_{q-1}(P_{i_{B,X}}, P_{i_{C,A}})
        $$
        where $i_{B,X} : B \hookrightarrow X$, $i_{C,A} : C \hookrightarrow A$
        and $P_{f}$ is the homotopy fiber\\
        $$
        \{ (y,\gamma) \in Y \times M(I,Z)_* \mid \gamma(1) = f(y) \}
        $$
        of pointed map $f : Y \to Z$.
        Use long exact sequence of pairs:
        \begin{align*}
            & \cdots \to \pi_{q}(P_{i_{B,X}}, P_{i_{C,A}}) \to \pi_{q-1}(P_{i_{C,A}})
            \to \pi_{q-1} (P_{i_{B,X}}) \to \pi_{q-1}(P_{i_{B,X}}, P_{i_{C,A}})
            \to \pi_{q-2}(P_{i_{C,A}}) \to \cdots \\
            & \cdots \to
            \pi_{1}(P_{i_{B,X}}, P_{i_{C,A}}) \to \pi_{0}(P_{i_{C,A}})
            \to \pi_{0} (P_{i_{B,X}}) 
        \end{align*}
        and observe that $\pi_{q}(P_{i_{X,B}}) \cong \pi_{q+1}(X,B)$
        since for any $f : S^q \to P_{i_{X,B}}$
        we have:
        \[\begin{tikzcd}
            {S^q} \\
            & {P_{i_{B,X}}} & {M(I,X)_*} \\
            & B & X
            \arrow[from=2-2, to=3-2]
            \arrow[from=3-2, to=3-3]
            \arrow[from=2-2, to=2-3]
            \arrow[from=2-3, to=3-3]
            \arrow["f", from=1-1, to=2-2]
            \arrow["{f'}"', curve={height=-12pt}, from=1-1, to=2-3]
            \arrow["g", curve={height=12pt}, from=1-1, to=3-2]
            \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=2-2, to=3-3]
        \end{tikzcd}\]
        use the fact $f' \in M(S^q,M(I,X)_*)_* \cong M(S^q \wedge I, X)_* \ni f'' $
        and $S^q \wedge I \approx D^{q+1}$ with
        \begin{align*}
            S^q & \hookrightarrow S^q \wedge I \approx D^{q+1}\\
            s  & \mapsto (s,1)
        \end{align*}
        the condition $f'(s)(1) = g(s)$ is equivalent to $f''((s,1)) = g(s)$,
        that is have a map $f$ is equivalent to have a map $f'' : (D^{q+1},S^q) \to (X,B)$.
        With the analogue statement also valid for homotopies $S^q \times I \to P_{i_{X,B}}$,
        we have $\pi_q(P_{i_{B,X}}) = [S^q,\ast; P_{i_{B,X}}, \ast] \cong [D^{q+1},S^q;X,B] = \pi_{q+1}(X,B)$.\\
        Rewrites the long exact sequence of pairs above to:
        \begin{align*}
            & \cdots \to \pi_{q+1}(X;A,B) \to \pi_{q}(A,C)
            \to \pi_{q} (X,B) \to \pi_{q}(X;A,B)
            \to \pi_{q-1}(A,C) \to \cdots \\
            & \cdots \to
            \pi_{2}(X;A,B) \to \pi_{1}(A,C)
            \to \pi_{1}(X,B) 
        \end{align*}
        Conditions $m \geq 1, n \geq 1$ guarantees
        $\pi_0(C) \to \pi_0 (A)$ and $\pi_0(C) \to \pi_0(B)$
        are surjections.\\
        $m \geq 2$ is equivalent to $\pi_1(A,C) = 0$, which implies $\pi_0(C) \to \pi_0 (A)$ is bijection.\\
        For $x \in \pi_0(A \cap_C B)$, we can always find
        $b \in \pi_0(B), i_{B,X\ *} (b) = x$ or $a \in \pi_0(A), i_{A,X\ *} (a) = x$
        which becomes $b \in \pi_0(B), i_{B,X\ *} (b) = x$ or $c \in \pi_0(C), i_{C,X\ *} (c) = x$
        when  $\pi_0(C) \to \pi_0 (A)$ is bijection.
        That is equivalent to $\pi_0(B) \to \pi_0(X) $ is bijection,
        which means $\pi_1(X,B) = 0$.\\

        We only need to show that for $2 \leq q \leq m+n-2$,
        $\pi_q(X;A,B) = 0$.\\

        With $J^{q-1} := (\partial I^{q-1} \times I) \cup (I^{q-1} \times \{ 0 \})$,
        we have:

        \begin{align*}
            \pi_{q}(P_{i_{B,X}}, P_{i_{C,A}})
            & = [I^{q}, \partial I^{q}, J^{q-1}; P_{i_{B,X}}, P_{i_{C,A}},*]\\
            & = [I^{q} \wedge I;\ I^q, \ \partial I^{q} \wedge I,\ J^{q-1} \wedge I \to X; B, A, \ast]\\
            & := \text{relative homotopy classes of pointed maps}\\
            & \quad \quad f : I^q \wedge I \to X \text{ satisfying:}
            \quad  \begin{cases}
                f(I^q) & \subseteq B\\
                f(\partial I^{q} \wedge I) & \subseteq A\\
                f(\partial I^{q}) & \subseteq C\\
                f(J^{q-1} \wedge I) & = *
            \end{cases}\\
            & \quad \quad \text{``relative'' means the homotopy $h$ determine the classes}\\
            & \quad \quad \text{satisfy:}
            \quad \begin{cases}
                h(I^q \times I) & \subseteq B\\
                h((\partial I^{q} \wedge I) \times I) & \subseteq A \\
                h(\partial I^{q} \times I) & \subseteq C\\
                h((J^{q-1} \wedge I) \times I) & = *
            \end{cases}\\
            & \quad \quad \text{(notice that $\partial I^{q} \wedge I \cap I^q = \partial I^q$, therefore $f(\partial I^q) \subseteq A \cap B = C$)}\\
            & \quad \quad \quad \text{(this is called (relative) homotopy class of maps of tetrads)}\\
            & \quad \\
            & = [(I^{q} \times I)/ K;\ I^q \times \{1\},\ (\partial I^{q} \times I) / K,\  (J^{q-1} \times I)  / K \to X; B, A, \ast]\\
            & \quad \quad \text{($K := I^q \times \{0\} \cup \{i_0\} \times I$)}\\
            & = [I^{q+1};\ (I^q \times \{1\}) \cup K,\ (\partial I^{q} \times I) \cup K,\  J^{q-1} \times I \cup K \to X; B, A, \ast]\\
            & \quad \\
            & = [I^{q+1};\ I^q \times \{1\},\ I^{q-1} \times \{1\} \times I,\  J^{q-1} \times I \cup I^q \times \{0\} \to X; B, A, \ast]\\
            & \quad \quad \text{(notice that $\partial I^q = \partial I^{q-1} \times I \cup I^{q-1} \times \{ 0 , 1\} $)}
        \end{align*}

        We can assume that $(A,C)$ have no relative $q<m$-cells and
        $(B,C)$ have no relative $q<n$-cells.\\
        And we can assume that $X$ has finite many cells
        since $I^q$ is compact.\\
        For subcomplexes $C \subseteq A' \subseteq A$,
        where $A = e^m \cup A'$ (attaching one cell from $A'$).\\
        Let $X' := A' \cup_C B$,
        if the results hold for $(X';A',B)$ and $(X;A,X')$,
        then it hold for $(X;A,B)$ since we have
        map between exact homotopy sequences of triples
        $(A,A',C)$ and  $(X,X',B)$:
        \[\begin{tikzcd}
            {\pi_{q+1}(A,A')} & {\pi_q(A',C)} & {\pi_q(A,C)} & {\pi_q(A,A')} & {\pi_{q-1}(A',C)} \\
            {\pi_{q+1}(X,X')} & {\pi_q(X',B)} & {\pi_q(X,B)} & {\pi_q(X,X')} & {\pi_{q-1}(X',B)}
            \arrow["{i_{2,q+1}}"', from=1-1, to=2-1]
            \arrow[from=1-1, to=1-2]
            \arrow[from=2-1, to=2-2]
            \arrow[from=2-2, to=2-3]
            \arrow[from=1-2, to=1-3]
            \arrow[from=1-3, to=1-4]
            \arrow[from=2-3, to=2-4]
            \arrow[from=1-4, to=1-5]
            \arrow[from=2-4, to=2-5]
            \arrow["{i_{1,q-1}}"', from=1-5, to=2-5]
            \arrow["{i_{2,q}}"', from=1-4, to=2-4]
            \arrow["{i_{3,q}}"', from=1-3, to=2-3]
            \arrow["{i_{1,q}}"', from=1-2, to=2-2]
        \end{tikzcd}\]
        induced by inclusion $(A,A',C) \hookrightarrow (X,X',B)$.
        If the result hold for $(X';A',B)$ and $(X;A,X')$,
        maps  $i_{1,q},\ i_{2,q}$
        are isomorphisms when $1 \geq q \geq m+n-3$,
        are epimorphisms when $q = m+n-2$.
        Notice the $5$-lemma says that\\
        if $i_{1,q}$ and $i_{2,q}$ are epimorphisms, $i_{1,q-1}$ are monomorphism, then $i_{3,q}$ is epimorphism.\\
        if $i_{1,q}$ and $i_{2,q}$ are monomorphisms, $i_{2,q+1}$ are epimorphism, then $i_{3,q}$ is monomorphism.\\
        We also have if $C \subseteq B' \subseteq B$ with $B = B' \cup e^n$,
        the result hold for CW-triads $(X';A,B')$ and $(X;X',B)$
        where $X' = A \cup_C B'$,
        since $(A,C) \hookrightarrow (X,B)$ factors as
        $(A,C) \hookrightarrow (X',B') \hookrightarrow (X,B)$.\\

        Now we can assume that $A = C \cup D^m$ and $B = C \cup D^n$.\\

        The current goal of proof is to prove any
        $$
        f : (I^{q+1};\ I^q \times \{1\},\ I^{q-1} \times \{1\} \times I,\  J^{q-1} \times I \cup I^q \times \{0\}) \to (X; B, A, \ast)
        $$
        is nullhomotopic for any $q+1$ with $2 \leq q+1 \leq m+n-2$.\\
        For $a \in \interior{D^m}$, $b\in \interior{D^n}$ We have inclusions of based triads:
        $$
            (A;A,A-\{a\}) \hookrightarrow (X - \{b\};X -\{b\}, X - \{a,b\})
            \hookrightarrow (X;X-\{b\},X-\{a\}) \hookleftarrow (X;A,B)
        $$
        The first and the third induces
        isomorphisms on homotopy groups of triads
        since $B$ is a strong deformation retract of $X - \{a\}$ in $X$
        and $A$ is a strong deformation retract of $X - \{b\}$ in $X$.
        $\pi_{*}(A;A,A - \{a\}) = 0$ since
        $\pi_*(A,A - \{a\}) \to \pi_*(A,A \cap (A - \{a\}) )$
        are isomorphisms.\\
        
        Current goal : choose good $a,b$ to show $f$ regarded as a pointed traid map to $(X;X-\{b\},X-\{a\})$
        is homotopic to a map
        $$
        f' : (I^{q+1};\ I^{q-1} \times \{1\} \times I,\ I^q \times \{1\},\  J^{q-1} \times I \cup I^q \times \{0\}) \to (X - \{b\}; X-\{b\}, X-\{a,b\}, \ast)
        $$
        if $2 \leq q+1 \leq m+n-2$.\\

        \begin{note}
            We want to homotopically remove some point $f^{-1}(b)$,
        first we may want to construct some Uryssohn function $u$
        separating $f^{-1}(a) \cup J^{q-1} \times I \cup I^q \times \{0\}$ and $f^{-1}(b)$ 
        and construct homotopy of cube $h^+: (r,s,t) \mapsto (r,(1-u(r,s)t)s)$
        wishing that $f(h^+(r,s,1))$ would miss $b$.
        The problem in this method is that
        points $f^{-1}(b)$ in the cube would be homotopically
        replaced by other points.
        Since our desire homotopy does not change the first $q$
        coordinates of the cube, we want to separate
        $p^{-1}(p(f^{-1}(a))) \cup J^{q-1} \times I$
        and
        $p^{-1}(p(f^{-1}(b)))$
        (where $p : I^q \times I \to I^q$).
        Our problem is to find suitable $a$, $b$ such that
        $p(f^{-1}(a)) \cap p(f^{-1}(b)) = \emptyset$.\\
        \end{note}
        
        We use manifold structure on $D^m$ and $D^n$ to achieve it,
        now we homotopically approximate $f$ by a map $g$ which 
        smooth on $f^{-1}(D^m_{<1/2} \cup D^n_{<1/2})$.\\

        Let $U_{<r} := f^{-1}(D^m_{<r} \cup D^n_{<r})$,
        Use smooth deformation theorem to construct smooth map (for any $0 < \epsilon$)
        $g' : U_{<3/4} \to D^m_{<3/4} \cup D^n_{<3/4}$ with homotopy
        $h_1 : g' \simeq f|_{U_{<3/4}}$ (and bound $|g'(x) - f(x)| < \epsilon$ for any $x \in U_{<1}$)
        and take partition of unity
        $\{\rho, \rho'\}$ with subcoordinates $\{I^{q+1} - \ol{U_{<1/2}},\ U_{<3/4}\}$,
        we have:
        \begin{align*}
            g & := \rho f + \rho' g' \\
            h_2 & : g \simeq f \rel (I^{q+1} - U_{<3/4}) \\
            h_2 & : I^{q+1} \times I \to X\\
            & \quad (x,t) \mapsto \rho(x)f(x) + \rho'(x)h_1(x,t)\\
        \end{align*}
        with scalar multiplication and addition is already defined on smooth structure on $D^m_{<3/4} \cup D^n_{<3/4}$.\\
        We could assmue that $g(I^{q-1} \times \{1\} \times I) \cap D^n_{<1/2} = \emptyset$
        (which implies $g$ is a map of tetrads to $(X;X-\{b\},X-\{a\},\ast)$)
        and $g(I^{q} \times \{1\}) \cap D^m_{<1/2} = \emptyset$
        since $f(I^{q-1} \times \{1\} \times I) \subseteq A$ and $f(I^q\times \{1\}) \subseteq B$
        and we can always tighten the bound $\epsilon$,
        (Similar argument also hold for $h_2$,
        then we have $h_2 : g \simeq f$ as homotopy between maps of tetrads.)\\

        Use the manifold structure to find good $(a,b)$:\\
        $V := g^{-1}(D^m_{<1/2}) \times g^{-1}(D^n_{<1/2})$
        is a sub-manifold of $I^{2(q+1)}$.
        Consider $W := \{ (v,v') \in V \mid p(v)=p(v') \}$,
        which is the zero set of smooth submersion
        $(v,v') \mapsto p(v) - p(v')$.
        $W$ is smooth manifold with codimension $q$.
        Therefore the map $(g,g) : W \to D^m_{<1/2} \times D^n_{<1/2}$
        is smooth map between manifolds of dimension $q+2$ and $m+n$.
        The map is not surjection since $q+2 < m+n$.
        Then we have $(a,b) \notin (g,g)(W)$
        (that is, $p(g^{-1}(a)) \cap p(g^{-1}(b))$).\\

        Since $g(I^{q-1} \times \{1\} \times I) \cap D^n_{<1/2} = \emptyset$
        and $g(J^{q-1} \times I) \cap D^n_{<1/2} = \emptyset$,
        we have $g(\partial I^q \times I) \cap D^n_{<1/2} = \emptyset$.
        By Uryssohn's lemma, we have $u : I^{q} \to I$ separating
        $p(g^{-1}(a)) \cup \partial I^q$ and $p(g^{-1}(b))$.
        Finally we have:
        \begin{align*}
            h' : I^q \times I \times I & \to I^q \times I\\
            (r,s,t) & \mapsto (r,(1-u(r)t)s)
        \end{align*}
        and $h := g \circ h'$, $f' := h(-,1)$.
        $f'(I^{q+1}) \cap \{b\} = \emptyset$ since if
        $\E (r,s) \in I^q \times I, \ f'(r,s)=b$, then
        $b = g(r,(1-u(r))s) = g(r,0) = \ast$ leads to contradiction.\\
        Last step is to check that $h$ is a homotopy between maps 
        $$
        (I^{q+1};\ I^{q-1} \times \{1\} \times I,\ I^q \times \{1\},\  J^{q-1} \times I \cup I^q \times \{0\}) \to (X; X-\{b\}, X-\{a\}, \ast)
        $$
        Since $g$ is, $g \circ h'$ is too.\\
        \qed

    \end{prf}

    \begin{cor}
        \label{hyp:cofib-induce-r+s-1-equiv-use-r-1-conn-pair-s-1-conn-snd}
        Suppose that $Y_0 \hookrightarrow Y$ is cofibration,
        $(Y,Y_0)$ is $(r-1)$-connected and $Y_0$ is $(s-1)$-connected,
        then $(Y,Y_0) \to (Y/Y_0 , \ast)$ is $(r+s-1)$-equivalence.
        ($r \geq 2,\ s \geq 1$)
    \end{cor}

    \begin{prf}
        $Y_0 \hookrightarrow C Y_0$ is cofibration and $(C Y_0 , Y_0)$
        is $s$-connected.
        Use \hyperref[hyp:Homotopy-Excision-Theorem]{homotopy excision theorem} (with
        $X= Y \cup C Y_0,\ A = Y,\ B=C Y_0,\ C = Y_0$)
        to see $(Y,Y_0) \to (Y \cup C Y_0, C Y_0)$
        is $(r+s-1)$-equivalence.
        And $(Y \cup C Y_0, C Y_0) \to (Y/Y_0, \ast)$ is homotopy equivalence
        since $Y_0 \hookrightarrow Y$ is cofibration.\\
        \qed
    \end{prf}

    \begin{cor}
        For $n \geq 2$, $f : X \to Y$ is $(n-1)$-equivalence
        between $(s-1)$-connected spaces,
        then $(M_f,X) \to (C^+_f, \ast)$ is $(n+s-1)$-equivalence.
        Where $C^+_f := Y \cup_f C^+X $, $C^+X := (X \times I) / (X \times \{1\})$.
        is the unreduced mapping cone and the unreduced cone.
    \end{cor}

    \begin{prf}
        $f$ is $(n-1)$-equivalence implies $(M_f,X)$ is $(n-1)$-connected.
        Use corollary above.\\
        \qed
    \end{prf}

    \begin{cor}
        For $n\geq 2$,
        if $f : X \to Y$ is pointed map between
        $(n-1)$-connected well-pointed spaces
        (that is, pointed space whose inclusion of the base point is (closed) cofibration).
        Then $C_f$ is $(n-1)$-connected and $\pi_n(M_f,X) \to \pi_n(C_f, \ast)$
        is isomorphism.
    \end{cor}

    \begin{prf}
        Use homotopy extension property to extend to unreduced case.
        $f$ is map between $(n-1)$-connected space
        implies $f$ is at least a $(n-1)$-equivalence.
        Therefore $(M_f,X) \to (C_f,\ast)$ is $(2n-1)$-equivalence,
        Since we have $n < 2n-1$ for any $n \geq 2$,
        $\pi_n(M_f,X) \to \pi_n(C_f, \ast)$ is isomorphism.\\
        \qed
    \end{prf}

    \begin{thm}
        \label{hyp:Suspension-Theorem}(Freudenthal Suspension Theorem)
        If $X$ is well-pointed and $(n-1)$-connected ($n \geq 1$),
        then the map:
        \begin{align*}
            \sigma : \pi_q(X) & \to \pi_{q+1}(\Sigma X) \\
            f & \mapsto \Sigma f
        \end{align*}
        is isomorphism if $q < 2n-1$
        and epimorphism if $q = 2n-1$.
    \end{thm}

    \begin{prf}
        If we have $f : (I^q, \partial I^q) \to (X, \ast)$
        then $f\times \id_I : I^{q+1} \to X \times I$
        will give a map
        $\ol{f \times \id_I} : (I^{q+1},\ \partial I^{q+1},\ \partial I^q \times I \cup \partial I \times \{1\}) \to (CX,X,\ast)$
        since $J^q = \partial I^q \times I \cup \partial I \times \{0\}$,
        it does not give a map in $\pi_{q+1}(CX,X)$.
        we should change $\ol{f \times \id_I}$ into $\ol{f \times -\id_I}$.
        we have commutative diagram:
        \[\begin{tikzcd}
            {\pi_{q+1}(CX,X)} & {\pi_{q+1}(CX/X,\ast)} && {[\ol{f \times -\id_I}]} & {[p \circ (\ol{f \times -\id_I})]} \\
            {\pi_{q}(X)} & {\pi_{q+1}(\Sigma X)} && {[f]} & {[- \Sigma f]}
            \arrow["{p_*}", from=1-1, to=1-2]
            \arrow[Rightarrow, no head, from=1-2, to=2-2]
            \arrow["\partial"', curve={height=6pt}, from=1-1, to=2-1]
            \arrow["{-\sigma}"', from=2-1, to=2-2]
            \arrow[curve={height=6pt}, maps to, from=1-4, to=2-4]
            \arrow[maps to, from=2-4, to=2-5]
            \arrow[maps to, from=1-4, to=1-5]
            \arrow[Rightarrow, no head, from=1-5, to=2-5]
            \arrow["i"', curve={height=6pt}, from=2-1, to=1-1]
            \arrow[curve={height=6pt}, maps to, from=2-4, to=1-4]
        \end{tikzcd}\]
        Where $p : (CX,X) \to (CX/X, \ast)$
        is the canonical quotient map and 
        $i : [f] \to [\ol{f \times -\id_{I}}]$
        makes $\pi_{q+1}(CX) \to \pi_{q+1}(CX,X) \to \pi_q(X) \to \pi_q(CX)$
        split in middle
        (that is, $i$ is inverse of the connecting homomorphism $\partial$).
        We verify the commutativity:
        \begin{align*}
            -\Sigma f : (I^{q+1}, \partial I^{q+1}) & \to (CX/X, \ast)\\
            (s,t) & \mapsto f(s) \wedge (1-t)\\
            p \circ (\ol{f \times -\id_I}) : (I^{q+1}, \partial I^{q+1}) & \to (CX/X, \ast)\\
            (s,t) & \mapsto f(s) \wedge (1-t)
        \end{align*}
        Since $X \hookrightarrow CX$ is cofibration
        and $n$-equivalence between $(n-1)$-connected spaces,
        $p$ is an $2n$-equivalence.
        Therefore, $q+1 < 2n$ implies $-\sigma$ is isomorphism,
        $q+1 = 2n$ implies $-\sigma$ is epimorphism,
        and we have $-\sigma$ is iff $\sigma$ is.\\
        \qed
        
    \end{prf}

    \begin{defn}
        We now define the $q$-th stable homotopy group:
        $$
        \pi^s_k(X) := \colim_{r} \pi_{k+r} (\Sigma^r X) \cong \pi_{2k+2} (\Sigma^{k+2} X) \cong \pi_{k+n} (\Sigma^{n} X) \quad \quad (n-1 > k)
        $$
        The relation right side is directly from $\Sigma^n X$ is $(n-1)$-connected.
    \end{defn}

    \begin{note}
        We'll see later that $\{\pi^s_n\}_{n \in \bbN}$ defines a
        generalized homology theory.
    \end{note}

    \subsection{Hurewicz Theorem}

    First, we use homotopy excision theorem to prove
    following lemmas:

    \begin{lem}
        \label{hyp:pi-n-of-wedge-of-spheres-is-free}
        (every $S^n_a \approx S^n$)
        We have canonical $i_a : S^n_a \hookrightarrow \bigvee_{a \in A} S^n_a$
        and for $n > 1$:\\
        $$
        \pi_n (\bigvee_{a \in A} S^n_a) \cong \bigoplus_{a \in A} \bbZ_a
        $$ 
        where $[i_a] = 1 \in \bbZ_a \subseteq \bigoplus_{a \in A} \bbZ_a$ and every $\bbZ_a \cong \bbZ$.\\
        For $n = 1$:
        $$
        \pi_n (\bigvee_{a \in A} S^1_a) \cong \coprod_{a \in A} \bbZ_a
        $$
        where $\coprod$ is taken in category $\mbf{Grp}$,
        $[i_a] = 1 \in \bbZ_a \subseteq \coprod_{a \in A} \bbZ_a$ and every $\bbZ_a \cong \bbZ$.

    \end{lem}

    \begin{prf}
        \text{ } \\
        Case $n = 1$:\\
        Apply the Seifert-van Kampen theorem.\\
        Case $n > 1$:\\
        Suppose each $S^n_a$ have CW-complex structure
        with one $0$-cell and one $n$-cell.
        Consider finite product $\prod_{1 \leq i \leq k} S^n_i$
        and its subcomplex, finite wedge product 
        $\bigvee_{1 \leq i \leq k} S^n_i$.\\
        The inclusion
        $$
        \bigvee_{1 \leq i \leq k} S^n_i \hookrightarrow \prod_{1 \leq i \leq k} S^n_i
        $$
        is $(2n-1)$-equivalence since
        $\prod_{1 \leq i \leq k} S^n_i - \bigvee_{1 \leq i \leq k} S^n_i$
        only have cells of $\dim \geq 2n$.
        (use lemma \ref{hyp:dim-of-X-A-great-than-n-to-X,A-n-connected})\\
        Use exact homotopy sequence of pair,
        we deduce that $\pi_q(\bigvee_{1 \leq i \leq k} S^n_i) \to \pi_q(\prod_{1 \leq i \leq k} S^n_i) \cong \bigoplus_{1 \leq i \leq k} \bbZ$
        is an isomorphism for $q \leq 2n-2$.
        And $S^n_i \hookrightarrow \bigvee_{1 \leq i \leq k} S^n_i \hookrightarrow \prod_{1 \leq i \leq k} S^n_i$
        is just the $i$-th inclusion $S^n_i \hookrightarrow \prod_{1 \leq i \leq k} S^n_i$ which
        represents $1 \in \bbZ_i \hookrightarrow \bigoplus_{1 \leq i \leq k} \bbZ_i$.
        Infinite wedge case:
        \[\begin{tikzcd}
            {\bigoplus_{1\leq i \leq k} \pi_q (S^n_i)} & {\pi_q(\bigvee_{1 \leq i \leq k } S^n_i )} \\
            {\bigoplus_{a \in A}\pi_q(S^n_a)} & {\pi_q(\bigvee_{a \in A} S^n_a)}
            \arrow["{\bigoplus_{a \in A} i_{a*}}"', tail, two heads, from=2-1, to=2-2]
            \arrow[tail, from=1-1, to=2-1]
            \arrow["\cong", from=1-1, to=1-2]
            \arrow[from=1-2, to=2-2]
        \end{tikzcd}\]
        $\bigoplus_{a \in A} i_{a*}$ is monomorphism since every homotopy
        $S^n \times I \to \bigvee_{a \in A} S^n_a$ has a compact image,
        and $\bigoplus_{a \in A} i_{a*}$ is epimorphism since every map
        $S^n \times I \to \bigvee_{a \in A} S^n_a$ has a compat image.\\
        \qed

    \end{prf}

    \begin{lem}
        \label{hyp:free-group-morphism-give-wedge-of-spheres-morphism}
        For $n \geq 1$, if we have a map $f : \coprod_{a \in A} \bbZ_a \to  \coprod_{b \in B} \bbZ_b$ (case $n = 1$)\\
        or a map
        $f : \bigoplus_{a \in A} \bbZ_a \to \bigoplus_{b \in B} \bbZ_b$ (case $n > 1$).\\
        Then there exists a map
        $\phi : \bigvee_{a \in A} S^n_a \to \bigvee_{b \in B} S^n_b$
        unique up to homotopy
        and satisfy $\pi_n(\phi) = f$.
    \end{lem}

    \begin{prf}
        Suppose $f(1_a) = [\phi_a] \in [S^n, \bigvee_{b \in B} S^n_b]_*$,
        then $\phi_a$ is indeed a map $S^n_a \to \bigvee_{b \in B} S^n_b$.
        Now we define $\phi := \bigvee_a \phi_a : \bigvee_{a \in A} S^n_a \to \bigvee_{b \in B} S^n_b$.
        For any $a \in A$, $\phi|_{S^n_a} = \phi_a$,
        we have
        $$
        \pi_n(\phi) (1_a) = [\phi|_{S^n_a} \circ \id_{S^n_a}] = [\phi_a] = f(1_a)
        $$
        which implies $\pi_n(\phi)  = f$ since they are group homomorphisms.

        Uniqueness up to homotopy:
        $\pi_n(\phi)[1_a] = \pi_n(\phi')[1_a] $ implies $\phi|_{S^n_a} \simeq \phi'|_{S^n_a} \rel \ast$.
        Therefore $\phi \simeq \phi' \rel \ast$.\\
        \qed

    \end{prf}

    \begin{defn}
        If $H_n$ is a ordinary homology theory
        with coefficient $\bbZ$,\\
        then
        the map
        \begin{align*}
            h_X : \pi_n(X) & \to \waveH_n(X) := H_n(X,\ast)\\
                [f] & \mapsto f_*(1) 
                    &  (\ f_* : \waveH_n(S^n) \to \waveH_n(X)\ )
        \end{align*}
        is called \tbf{Hurewicz Homomorphism}.
        
    \end{defn}

    \begin{note}
        $h_{(-)}$ is natural transformation
        since we have
        % https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHBpX24oWCkiXSxbMCwxLCJcXHBpX24oWSkiXSxbMSwwLCJcXHdhdmVIX24oWCkiXSxbMSwxLCJcXHdhdmVIX24oWSkiXSxbMywwLCJbZl0iXSxbMywxLCJbZyBcXGNpcmMgZl0iXSxbNCwwLCJmXyooMSkiXSxbNCwxLCIoZ1xcY2lyYyBmKV8qICgxKSA9IChnXyogXFxjaXJjIGZfKikoMSkiXSxbMCwxLCJnXyoiLDJdLFswLDIsImhfWCJdLFsxLDMsImhfWSIsMl0sWzIsMywiZyoiXSxbNCw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNiwiIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs1LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XSxbNiw3LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV1d
        \[\begin{tikzcd}
            {\pi_n(X)} & {\waveH_n(X)} && {[f]} & {f_*(1)} \\
            {\pi_n(Y)} & {\waveH_n(Y)} && {[g \circ f]} & {(g\circ f)_* (1) = (g_* \circ f_*)(1)}
            \arrow["{g_*}"', from=1-1, to=2-1]
            \arrow["{h_X}", from=1-1, to=1-2]
            \arrow["{h_Y}"', from=2-1, to=2-2]
            \arrow["{g_*}", from=1-2, to=2-2]
            \arrow[maps to, from=1-4, to=2-4]
            \arrow[maps to, from=1-4, to=1-5]
            \arrow[maps to, from=2-4, to=2-5]
            \arrow[maps to, from=1-5, to=2-5]
        \end{tikzcd}\]
        commutes.
    \end{note}

    \begin{lem}
        If $X = \bigvee_{a \in A} S^n $, $h_X : \pi_n(X) \to \waveH_n(X)$
        is abelianization if $n=1$, isomorphism if $n \geq 2$.
    \end{lem}

    \begin{prf}
        Directly from lemma \ref{hyp:free-group-morphism-give-wedge-of-spheres-morphism}.
        (we used homotopic properties of spheres only in proving is lemma)
        \qed
    \end{prf}
    
    \begin{thm}
        (Hurewicz)
        If $X$ is $(n-1)$-connected,
        then $h_X : \pi_n(X) \to \waveH_n(X)$
        is abelianization if $n=1$, isomorphism if $n \geq 2$.
    \end{thm}

    \begin{prf}
        We can assume $X$ is CW-complex with $X^{n-1} = \ast$
        and each characteristic map is pointed.
        (since we have theorem \ref{hyp:Existence-of-CW-approximation})\\
        For CW-complex $X$,
        $\pi_{n}(X^{n+1}) \cong \pi_n(X)$ and $H_n(X^{n+1}) \cong H_n(X)$,
        Since we have \hyperref[hyp:cellularity-of-homotopy-group]{cellularity of homotopy group}
        and \hyperref[hyp:cellularity-of-homology]{cellularity of homology}.\\
        Then we have $X^n = \bigvee_{b \in B} S^n_b$,
        $X^{n+1} = C_\phi$ where $\phi : \bigvee_{a \in A} S^n_a \to X^n$
        are the characteristic maps.
        Use naturality of $h_{(-)}$, we have maps between exact sequence:
        % https://q.uiver.app/?q=WzAsOCxbMCwwLCJcXHBpX24oXFxiaWd2ZWVfe2EgXFxpbiBBfSBTXm5fYSkiXSxbMSwwLCJcXHBpX24oWF5uKSJdLFswLDEsIlxcd2F2ZUhfbihcXGJpZ3ZlZV97YSBcXGluIEF9IFNebikiXSxbMSwxLCJcXHdhdmVIX24oWF5uKSJdLFsyLDAsIlxccGlfbihDX1xccGhpKSJdLFsyLDEsIlxcd2F2ZUhfbihDX1xccGhpKSJdLFszLDAsIjAiXSxbMywxLCIwIl0sWzAsMSwiXFxwaGlfKiJdLFswLDIsImhfe1xcYmlndmVlX3thIFxcaW4gQX0gU15uX2F9Il0sWzEsMywiaF97WF5ufSJdLFsyLDMsIlxccGhpXyoiLDJdLFsxLDRdLFszLDVdLFs0LDUsImhfe0NfXFxwaGl9Il0sWzQsNl0sWzUsN11d
        \[\begin{tikzcd}
            {\pi_n(\bigvee_{a \in A} S^n_a)} & {\pi_n(X^n)} & {\pi_n(C_\phi)} & 0 \\
            {\waveH_n(\bigvee_{a \in A} S^n)} & {\waveH_n(X^n)} & {\waveH_n(C_\phi)} & 0
            \arrow["{\phi_*}", from=1-1, to=1-2]
            \arrow["{h_{\bigvee_{a \in A} S^n_a}}", from=1-1, to=2-1]
            \arrow["{h_{X^n}}", from=1-2, to=2-2]
            \arrow["{\phi_*}"', from=2-1, to=2-2]
            \arrow[from=1-2, to=1-3]
            \arrow[from=2-2, to=2-3]
            \arrow["{h_{C_\phi}}", from=1-3, to=2-3]
            \arrow[from=1-3, to=1-4]
            \arrow[from=2-3, to=2-4]
        \end{tikzcd}\]
        If $n> 1$, exactness of top row is directly
        from lemma \ref{hyp:cofib-induce-r+s-1-equiv-use-r-1-conn-pair-s-1-conn-snd}.
        ($(M_\phi, \bigvee_{a \in A} S^n_a)$ is $(n-1)$-connected since we have lemma \ref{hyp:dim-of-X-A-great-than-n-to-X,A-n-connected})
        $5$-lemma shows that $h_{C_\phi}$ is isomorphism. \\
        If $n=1$, Seifert-van Kampen theorem shows that
        $\pi_1(C_\phi) = \pi_1(X^n) / \gen{\Im \phi_*}_{nor}$.
        (where for $A \subseteq $ a group $G$, $\gen{A}_{nor} := \{gA\inv{g} \mid g \in G \}$).
        The top row is not exact, but top row's abelianization is exact since
        $\gen{\Im f}_{nor} / [B,B] = \Im f / [B,B]$
        for any group morphism $f : A \to B$.
        Therefore we have diagram below with the middle row and the bottom row exact:
        % https://q.uiver.app/?q=WzAsMTUsWzAsMCwiQSJdLFsxLDAsIkIiXSxbMiwwLCJHIl0sWzMsMCwiMCJdLFszLDEsIjAiXSxbMiwxLCJHXlxcbWF0aHJte2FifSJdLFsxLDEsIkJeXFxtYXRocm17YWJ9Il0sWzAsMSwiQV57XFxtYXRocm17YWJ9fSJdLFs0LDAsIjAiXSxbNCwxLCIwIl0sWzAsMiwiQSciXSxbMSwyLCJCJyJdLFsyLDIsIkcnIl0sWzMsMiwiMCJdLFs0LDIsIjAiXSxbMCwxLCJmIl0sWzEsMiwicSJdLFsyLDNdLFszLDRdLFsyLDVdLFsxLDZdLFswLDddLFs2LDUsInFeXFxtYXRocm17YWJ9Il0sWzUsNF0sWzcsNiwiZl5cXG1hdGhybXthYn0iXSxbMyw4XSxbNCw5XSxbOCw5XSxbMTAsMTFdLFsxMSwxMl0sWzEyLDEzXSxbMTMsMTRdLFs3LDEwLCJcXGNvbmciLDJdLFs2LDExLCJcXGNvbmciLDJdLFs0LDEzLCJcXGNvbmciXSxbOSwxNCwiXFxjb25nIl0sWzUsMTJdXQ==
        \[\begin{tikzcd}
            A & B & G = B/\gen{\Im f}_{nor} & 0 & 0 \\
            {A^{\mathrm{ab}}} & {B^\mathrm{ab}} & {G^\mathrm{ab}} & 0 & 0 \\
            {A'} & {B'} & {G'} & 0 & 0
            \arrow["f", from=1-1, to=1-2]
            \arrow["q", from=1-2, to=1-3]
            \arrow[from=1-3, to=1-4]
            \arrow[from=1-4, to=2-4]
            \arrow[from=1-3, to=2-3]
            \arrow[from=1-2, to=2-2]
            \arrow[from=1-1, to=2-1]
            \arrow["{q^\mathrm{ab}}", from=2-2, to=2-3]
            \arrow[from=2-3, to=2-4]
            \arrow["{f^\mathrm{ab}}", from=2-1, to=2-2]
            \arrow[from=1-4, to=1-5]
            \arrow[from=2-4, to=2-5]
            \arrow[from=1-5, to=2-5]
            \arrow[from=3-1, to=3-2]
            \arrow[from=3-2, to=3-3]
            \arrow[from=3-3, to=3-4]
            \arrow[from=3-4, to=3-5]
            \arrow["\cong"', from=2-1, to=3-1]
            \arrow["\cong"', from=2-2, to=3-2]
            \arrow["\cong", from=2-4, to=3-4]
            \arrow["\cong", from=2-5, to=3-5]
            \arrow[from=2-3, to=3-3]
        \end{tikzcd}\]
        Finally apply $5$-lemma on the middle row and the bottom row.\\
        \qed
    \end{prf}

    \subsection{Moore Spaces}

    \begin{defn}
        A space $X$ is \tbf{Eilenberg-Mac Lane space} of
        \tbf{type} $K(G,n)$ (where $G$ is group and is abelian for $n \geq 2$)
        if
        \begin{align*}
            \pi_q(X) \cong \begin{cases}
                G \quad &  n = q\\
                0 \quad &  n \neq q
            \end{cases}
        \end{align*}
    \end{defn}

    We see that \hyperref[hyp:SP-Sn-is-K(Z,n)]{$\SP S^n$ is a $K(\bbZ,n)$}.
    Now we use this to construct other $K(G,n)$.

    \begin{note}
        In order to construct $K(G,n)$,
        we construct a space $M(G,n)$ which have $\pi_n(M(G,n)) = G$,
        $\pi_q(M(G,n)) = 0$ for $q < n$
        and we can apply $\SP$ on it to kill all $\dim > n$ homotopy group.
    \end{note}

    \begin{prop}
        For any $k \in \bbZ$,
        there is a map $a_k : S^1 \to S^1$
        with $a_k$,
        and $C_{a_k} = S^1 \cup_{a_k} e^2$ is the desired $M(\bbZ / k \bbZ,1)$
        (that is $\SP (S^1 \cup_{a_k} e^2)$ is a $K(\bbZ / k \bbZ, 1)$).
    \end{prop}

    \begin{prf}
        Consider sequence
        $S^1 \xrightarrow{a_k} S^1 \hookrightarrow C_{a_k} \twoheadrightarrow  \Sigma S^1 = C_{a_k}/S^1$,
        we apply an usual form of  \hyperref[hyp:quasi-fibration-SPX-to-SP(X/A)]{Dold-Thom Theorem}
        to see that $\SP (C_{a_k}) \to \SP (S^2)$ 
        is a quasi-fibration with fiber $\SP (S^1)$.
        Then we have exact sequence:
        \begin{align*}
            \cdots & \to \pi_q(\SP S^1) \to \pi_q(\SP C_{a_k}) \to \pi_q(\SP S^2) \to \pi_{q-1}(\SP S^1) \to\\
            \cdots & \to \pi_2(\SP S^1) \to \pi_2(\SP C_{a_k}) \to \pi_2(\SP S^2)\\
            & \to \pi_1(\SP S^1) \to \pi_1(\SP C_{a_k}) \to \pi_1(\SP S^2) 
        \end{align*}
        We can conclude that $\pi_q(\SP C_{a_k}) = 0$ for any $q \neq 0,1$
        and:
        \begin{align*}
            0 \to \pi_2(\SP C_{a_k}) \to \pi_2(\SP S^2) = \bbZ
            \xrightarrow{\partial} \pi_1(\SP S^1) = \bbZ \to \pi_1(\SP C_{a_k}) \to 0
        \end{align*}
        exact. Where $\partial$ is defined by:
        \begin{align*}
            \pi_2(\SP S^2) \cong [D^2, S^1, \ast; \SP C_{a_k}, \SP S^1, \ast] \ni f \mapsto f|_{S^1} \in [S^1 , S^1]_*
        \end{align*}
        (Now we want to show that $\partial$ is multiplication by $k$)\\
        The $1 \in \bbZ \cong \pi_2(\SP S^2)$ is represented by $[i_2 : S^2 \hookrightarrow \SP S^2]$.\\
        Since $[D^2, S^1, \ast; \SP C_{a_k}, \SP S^1, \ast] \xrightarrow{p_*} [D^2,S^1; \SP S^2, \ast]$
        is isomorphism,\\
        and the map $\varphi : (D^2, S^1) \xrightarrow[]{\id_{e^2} \cup a_k} (C_{a_k}, S^1) \hookrightarrow (\SP C_{a_k}, \SP S^1) $
        satisfy $p \circ \varphi = i_2$,\\
        the $1 \in \bbZ \cong \pi_2(\SP C_{a_k}, \SP S^1)$ is represented by $\varphi$.
        Then we have $\partial (1)$ is represented by $\varphi|_{S^1} = i_1 \circ a_k$
        where $i_1 : S^1 \hookrightarrow \SP S^1$.\\
        The map $\partial$ is $\bbZ \ni n \mapsto k n \in \bbZ$ since
        $[i_1 \circ a_k] = k$.\\
        Therefore $\pi_2(\SP C_{a_k}) = 0$ and $\pi_1(\SP C_{a_k}) = \bbZ / k \bbZ$.\\
        \qed
        
    \end{prf}

    \begin{prop}
        For each $n \geq 1$, $k \in Z$, $\SP (S^n \cup_{\Sigma^{n-1} a_k} e^{n+1})$ is a $K(\bbZ/ k \bbZ,n)$.
    \end{prop}

    \begin{prf}
        For $q \geq 1$, $\Sigma (S^q \cup_{\Sigma^{q-1} a_k} e^{q+1}) \approx \Sigma S^{q} \cup_{\Sigma^q a_k} \Sigma e^{q+1} = S^{q+1} \cup_{\Sigma^q a_k} e^{q+2}$
        since $\Sigma$ is left adjoint of $\Omega$ in $\mbf{TOP_*}$
        and the pushout is took in $\mbf{TOP_*}$.
        Observe that $\pi_{q}(\SP X) \cong \pi_{q+1}(\SP \Sigma X)$,
        now we have done.\\
        \qed
    \end{prf}

    Since $\waveH_n(X) \cong \waveH_n(X \cup C\ast) \cong H_n(X,\ast)$, we have
    $$
    \pi_n(\SP (\bigvee_{i\in I} X_i)) = \waveH_n(\bigvee_{i\in I} X_i) \cong H_n(\bigvee_{i\in I} X_i, \ast) \cong H_n(\coprod_{i\in I} X_i, \coprod_{i\in I} \ast) \cong \bigoplus_{i\in I} H_n(X_i,\ast) \cong \bigoplus_{i\in I} \pi_n(\SP X_i)
    $$
    We can deduce the following proposition immediately:

    \begin{prop}
        For finitely generated abelian group $G \cong (\bigoplus_{r} \bbZ) \oplus (\bigoplus_{1 \leq i \leq k}\bbZ / d_i \bbZ)$,
        (where $r \in \bbN$, each $d_i \in \bbZ$)
        we have $\SP ((\bigvee_{r} S^n) \vee (\bigvee_{1 \leq i \leq k} (S^n \cup_{a_{d_i}} e^{n+1} ) ) )$
        is a $K(G,n)$.
    \end{prop}

    Since every abelian group $G$ have a free resolution sequence:
    $$
    0 \to \bigoplus_{a \in A} \bbZ \xrightarrow{f} \bigoplus_{b \in B} \bbZ \twoheadrightarrow G \to 0
    $$
    exact.
    And for every group $G = F(X)/\gen{Y}_{nor} $
    (where $F(X) := \coprod_{x \in X} \bbZ_x$ is the free group functor and $\gen{Y}_{nor}$
    is the normal subgroup generated by $Y$),
    we have:
    $$
    1 \to \coprod_{y \in \gen{Y}_{nor}} \bbZ_y \xrightarrow{f : 1_y \mapsto y} \coprod_{x \in X} \bbZ_x \twoheadrightarrow G \to 1
    $$
    exact.

    Next proposition allows to construct spaces
    $M(\bigoplus_{a \in A} \bbZ,n)$
    and $M(\coprod_{a \in A} \bbZ,1)$:

    

    \begin{defn}\label{hyp:definition-of-Moore-space}
        For $n > 1$, $G$ an abelian group, we have exact sequence
        $$
        0 \to \bigoplus_{a \in A} \bbZ \xrightarrow{f} \bigoplus_{b \in B} \bbZ \twoheadrightarrow G \to 0
        $$
        Then we have: (with $\phi$ is the map obtained using lemma \ref{hyp:free-group-morphism-give-wedge-of-spheres-morphism})
        $$
        \bigvee_{a \in A} S^n_a \xrightarrow{\phi} \bigvee_{b \in B} S^n_b \to C_\phi
        $$
        the \tbf{Moore space} of type $(G,n)$ is defined as
        $M(G,n) := C_\phi$.\\

        For $n = 1$, $G$ a group, we have exact sequence:
        $$
        1 \to \coprod_{y \in \gen{Y}_{nor}} \bbZ_y \xrightarrow{f : 1_y \mapsto y} \coprod_{x \in X} \bbZ_x \twoheadrightarrow G \to 1
        $$
        Then we have: (with $\phi$ is the map obtained using lemma \ref{hyp:free-group-morphism-give-wedge-of-spheres-morphism})
        $$
        \bigvee_{y \in \gen{Y}_{nor}} S^1_y \xrightarrow{\phi} \bigvee_{x \in X} S^1_x \to C_\phi
        $$
        the \tbf{Moore space} of type $(G,1)$ is defined as
        $M(G,1) := C_\phi$.
    \end{defn}

    \begin{prop}
        $\pi_n(M(G,n)) = G$
    \end{prop}

    \begin{prf}
        For $n>1$, use diagram:
        \[\begin{tikzcd}
            {} & {M_\phi} \\
            X & Y
            \arrow["\phi"', from=2-1, to=2-2]
            \arrow[""{name=0, anchor=center, inner sep=0}, "j", curve={height=-6pt}, from=2-2, to=1-2]
            \arrow["i", from=2-1, to=1-2]
            \arrow[""{name=1, anchor=center, inner sep=0}, "p", curve={height=-6pt}, from=1-2, to=2-2]
            \arrow["\simeq"{marking}, Rightarrow, draw=none, from=0, to=1]
        \end{tikzcd}\]
        To see:
        % https://q.uiver.app/?q=WzAsMTAsWzEsMCwiXFxwaV9uKFxcYmlndmVlX3thIFxcaW4gQX0gU15uX2EpIl0sWzIsMCwiXFxwaV9uKE1fXFxwaGkpIl0sWzMsMCwiXFxwaV9uKE1fXFxwaGksXFxiaWd2ZWVfe2EgXFxpbiBBfSBTXm5fYSkiXSxbNCwwLCJcXHBpX3tuLTF9KFxcYmlndmVlX3thIFxcaW4gQX0gU15uX2EpIl0sWzUsMCwiXFxjZG90cyJdLFswLDAsIlxcY2RvdHMiXSxbMSwyLCJcXGNvcHJvZF97YSBcXGluIEF9IFxcYmJaX2EiXSxbMiwyLCJcXGNvcHJvZF97YiBcXGluIEF9IFxcYmJaX2EiXSxbMiwxLCJcXHBpX24oXFxiaWd2ZWVfe2IgXFxpbiBCfSBTXm5fYikiXSxbMywyLCJcXHBpX24oTShHLG4pKSJdLFswLDEsImlfKiJdLFsxLDJdLFsyLDNdLFszLDRdLFs1LDBdLFs2LDAsIlxcY29uZyJdLFs2LDcsImYiLDJdLFs3LDgsIlxcY29uZyIsMl0sWzAsOCwiXFxwaGlfKiIsMl0sWzgsMSwial8qIFxcY29uZyIsMl0sWzIsOSwicV8qIl1d
        \[\begin{tikzcd}
            \cdots & {\pi_n(\bigvee_{a \in A} S^n_a)} & {\pi_n(M_\phi)} & {\pi_n(M_\phi,\bigvee_{a \in A} S^n_a)} & {\pi_{n-1}(\bigvee_{a \in A} S^n_a)} & \cdots \\
            && {\pi_n(\bigvee_{b \in B} S^n_b)} \\
            & {\bigoplus_{a \in A} \bbZ_a} & {\bigoplus_{b \in A} \bbZ_a} & {\pi_n(M(G,n))}
            \arrow["{i_*}", from=1-2, to=1-3]
            \arrow[from=1-3, to=1-4]
            \arrow[from=1-4, to=1-5]
            \arrow[from=1-5, to=1-6]
            \arrow[from=1-1, to=1-2]
            \arrow["\cong", from=3-2, to=1-2]
            \arrow["f"', from=3-2, to=3-3]
            \arrow["\cong"', from=3-3, to=2-3]
            \arrow["{\phi_*}"', from=1-2, to=2-3]
            \arrow["{j_* \cong}"', from=2-3, to=1-3]
            \arrow["{q_*}", from=1-4, to=3-4]
        \end{tikzcd}\]
        Where $q_*$ is induced by $q : (M_\phi,\bigvee_{a \in A} S^n_a) \to (C_\phi , \ast)$.
        $\bigvee_{a \in A} S^n_a$ is $(n-1)$-connected,
        implies $\pi_{n-1}(\bigvee_{a \in A} S^n_a) = 0$.
        $(M_\phi, \bigvee_{a \in A} S^n_a)$ is $(n-1)$-connected
        due to lemma \ref{hyp:dim-of-X-A-great-than-n-to-X,A-n-connected}.
        Therefore we have
        $q_*$ is isomorphism using lemma \ref{hyp:cofib-induce-r+s-1-equiv-use-r-1-conn-pair-s-1-conn-snd}.
        Diagram above reduces to:
        $$
        0 \to \bigoplus_{a \in A} \bbZ_a \xrightarrow{f} \bigoplus_{b \in B} \bbZ_b \twoheadrightarrow \pi_n(M(G,n)) \to 0
        $$
        For $n=1$, use Seifert-van Kampen theorem.\\
        \qed
    \end{prf}

    \begin{prop}
        For any $n \geq 1$ and any group morphism $f : G \to G'$
        there exist
        morphism $f_M : M(G,n) \to M(G',n)$
        such that $f_{M*} = f $.
    \end{prop}

    \begin{prf}
        We have following for $n > 1$: (since free $\bbZ$-module is projective)
        % https://q.uiver.app/?q=WzAsMTAsWzEsMCwiXFxiaWdvcGx1c197YSBcXGluIEF9IFxcYmJaX2EiXSxbMiwwLCJcXGJpZ29wbHVzX3tiIFxcaW4gQn0gXFxiYlpfYiJdLFszLDAsIkciXSxbNCwwLCIwIl0sWzAsMCwiMCJdLFszLDEsIkcnIl0sWzQsMSwiMCJdLFsyLDEsIlxcYmlnb3BsdXNfe2InIFxcaW4gQid9IFxcYmJaX3tiJ30iXSxbMSwxLCJcXGJpZ29wbHVzX3thICdcXGluIEEnfSBcXGJiWl97YSd9Il0sWzAsMSwiMCJdLFswLDEsImkiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtb25vIn19fV0sWzEsMiwicSIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFsyLDNdLFs0LDBdLFsyLDUsImYiXSxbNSw2XSxbNyw1LCJxJyIsMix7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFs4LDcsImknIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibW9ubyJ9fX1dLFs5LDhdLFsxLDcsInJfMCIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFswLDgsInJfMSIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dXQ==
        \[\begin{tikzcd}
            0 & {\bigoplus_{a \in A} \bbZ_a} & {\bigoplus_{b \in B} \bbZ_b} & G & 0 \\
            0 & {\bigoplus_{a '\in A'} \bbZ_{a'}} & {\bigoplus_{b' \in B'} \bbZ_{b'}} & {G'} & 0
            \arrow["i", tail, from=1-2, to=1-3]
            \arrow["q", two heads, from=1-3, to=1-4]
            \arrow[from=1-4, to=1-5]
            \arrow[from=1-1, to=1-2]
            \arrow["f", from=1-4, to=2-4]
            \arrow[from=2-4, to=2-5]
            \arrow["{q'}"', two heads, from=2-3, to=2-4]
            \arrow["{i'}"', tail, from=2-2, to=2-3]
            \arrow[from=2-1, to=2-2]
            \arrow["{r_0}", dashed, from=1-3, to=2-3]
            \arrow["{r_1}", dashed, from=1-2, to=2-2]
        \end{tikzcd}\]
        And we have following for $n = 1$: (where $i(1_{1_{a}1_b\inv{(1_{a \cdot b})}}) := 1_{a}1_b\inv{(1_{a \cdot b})}$)
        % https://q.uiver.app/?q=WzAsMTAsWzMsMCwiRyJdLFszLDEsIkcnIl0sWzQsMSwiMSJdLFs0LDAsIjEiXSxbMiwwLCJcXGNvcHJvZF97ZyBcXGluIEd9IFxcYmJaX2ciXSxbMiwxLCJcXGNvcHJvZF97ZycgXFxpbiBHJ30gXFxiYlpfe2cnfSJdLFsxLDAsIlxcY29wcm9kX3soYSxiKVxcaW4gKEcsRyl9IFxcYmJaX3sxX2ExX2IoMV97YVxcY2RvdCBifSleey0xfX0gIl0sWzEsMSwiXFxjb3Byb2RfeyhhJyxiJylcXGluIChHJyxHJyl9IFxcYmJaX3sxX2EnMV9iJygxX3thJ1xcY2RvdCBiJ30pXnstMX19Il0sWzAsMCwiMSJdLFswLDEsIjEiXSxbMCwxLCJmIl0sWzEsMl0sWzAsM10sWzQsMCwicSIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFs1LDEsInEnIiwyLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoiZXBpIn19fV0sWzQsNSwicl8wIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzYsNCwiaSIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1vbm8ifX19XSxbNyw1LCJpJyIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1vbm8ifX19XSxbNiw3LCJyXzEiLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbOCw2XSxbOSw3XV0=
        \[\begin{tikzcd}
            1 & {\coprod_{(a,b)\in (G,G)} \bbZ_{1_a1_b\inv{(1_{a\cdot b})}} } & {\coprod_{g \in G} \bbZ_g} & G & 1 \\
            1 & {\coprod_{(a',b')\in (G',G')} \bbZ_{1_a'1_b'(1_{a'\cdot b'})^{-1}}} & {\coprod_{g' \in G'} \bbZ_{g'}} & {G'} & 1
            \arrow["f", from=1-4, to=2-4]
            \arrow[from=2-4, to=2-5]
            \arrow[from=1-4, to=1-5]
            \arrow["q", two heads, from=1-3, to=1-4]
            \arrow["{q'}"', two heads, from=2-3, to=2-4]
            \arrow["{r_0}", dashed, from=1-3, to=2-3]
            \arrow["i", tail, from=1-2, to=1-3]
            \arrow["{i'}"', tail, from=2-2, to=2-3]
            \arrow["{r_1}", dashed, from=1-2, to=2-2]
            \arrow[from=1-1, to=1-2]
            \arrow[from=2-1, to=2-2]
        \end{tikzcd}\]
        We could obtain: (use lemma \ref{hyp:free-group-morphism-give-wedge-of-spheres-morphism})
        % https://q.uiver.app/?q=WzAsNixbMCwwLCJcXGJpZ3ZlZV97YSBcXGluIEF9IFNebl9hIl0sWzEsMCwiXFxiaWd2ZWVfe2IgXFxpbiBCfSBTXm5fYiJdLFswLDEsIlxcYmlndmVlX3thJyBcXGluIEEnfSBTXm5fe2EnfSJdLFsxLDEsIlxcYmlndmVlX3tiJyBcXGluIEInfSBTXm5fe2InfSJdLFsyLDAsIkNfXFxwaGkiXSxbMiwxLCJDX3tcXHBoaSd9Il0sWzAsMSwiXFxwaGkiXSxbMCwyLCJcXGNoaV8xIiwyXSxbMiwzLCJcXHBoaSciLDJdLFsxLDMsIlxcY2hpXzAiXSxbMSw0XSxbMyw1XSxbNCw1LCJmX00iLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiwxLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
        \[\begin{tikzcd}
            {\bigvee_{a \in A} S^n_a} & {\bigvee_{b \in B} S^n_b} & {C_\phi} \\
            {\bigvee_{a' \in A'} S^n_{a'}} & {\bigvee_{b' \in B'} S^n_{b'}} & {C_{\phi'}}
            \arrow["\phi", from=1-1, to=1-2]
            \arrow["{\chi_1}"', from=1-1, to=2-1]
            \arrow["{\phi'}"', from=2-1, to=2-2]
            \arrow["{\chi_0}", from=1-2, to=2-2]
            \arrow[from=1-2, to=1-3]
            \arrow[from=2-2, to=2-3]
            \arrow["{f_M}", dashed, from=1-3, to=2-3]
            \arrow["\simeq"{marking}, draw=none, from=2-1, to=1-2]
        \end{tikzcd}\]
        Finally we have: (use universal property of cokernel)
        \[\begin{tikzcd}
            0 & {\pi_n(\bigvee_{a \in A} S^n_a)} & {\pi_n(\bigvee_{b \in B} S^n_b)} & {\pi_n(C_\phi)} & 0 \\
            0 & {\pi_n(\bigvee_{a' \in A'} S^n_{a'})} & {\pi_n(\bigvee_{b' \in B'} S^n_{b'})} & {\pi_n(C_{\phi'})} & 0
            \arrow[from=1-1, to=1-2]
            \arrow[from=2-1, to=2-2]
            \arrow["{\phi_* = i}", from=1-2, to=1-3]
            \arrow["{\phi'_*=i'}"', from=2-2, to=2-3]
            \arrow[from=1-3, to=1-4]
            \arrow[from=2-3, to=2-4]
            \arrow[from=2-4, to=2-5]
            \arrow[from=1-4, to=1-5]
            \arrow["{\chi_{1*} = r_1}", from=1-2, to=2-2]
            \arrow["{\chi_{0*} = r_0}", from=1-3, to=2-3]
            \arrow["{f_{M*} = f}", from=1-4, to=2-4]
        \end{tikzcd}\]
        \qed
    \end{prf}

    \begin{thm}
        $\SP (M (G,n))$ is a $K(G,n)$ if $G$ is abelian.
    \end{thm}

    \begin{prf}
        In the \hyperref[hyp:definition-of-Moore-space]{construction} of Moore spaces, we have:
        (use notations in the construction)
        % https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXGJpZ3ZlZV97YSBcXGluIEF9IFNebl9hIl0sWzEsMCwiXFxiaWd2ZWVfe2JcXGluIEJ9IFNebl9iIl0sWzEsMSwiTV9cXHBoaSJdLFsyLDEsIkNfXFxwaGkiXSxbMCwxLCJcXHBoaSJdLFsxLDIsIlxcc2ltZXEiXSxbMCwyXSxbMiwzXSxbMSwzXV0=
        \[\begin{tikzcd}
            {\bigvee_{a \in A} S^n_a} & {\bigvee_{b\in B} S^n_b} \\
            & {M_\phi} & {C_\phi}
            \arrow["\phi", from=1-1, to=1-2]
            \arrow["\simeq", from=1-2, to=2-2]
            \arrow[from=1-1, to=2-2]
            \arrow[from=2-2, to=2-3]
            \arrow[from=1-2, to=2-3]
        \end{tikzcd}\]
        which induces quasi-fibration
        $\SP M_\phi \to \SP C_\phi$
        with fiber $\SP \bigvee_{a \in A} S^n_a$.
        Then we have long exact sequence:
        \begin{align*}
            \cdots
            \to \pi_{q}(\SP \bigvee_{a \in A} S^n_a)
            \xrightarrow{\phi_*} \pi_{q}(\SP M_\phi)
            \to \pi_{q}(\SP C_\phi)
            \to \pi_{q-1}(\SP \bigvee_{a \in A} S^n_a)
            \to \cdots
        \end{align*}
        Sequence above says if $q \neq n \text{ and }  q \neq n+1$,
        then $\pi_q(\SP C_\phi) = 0$.
        If $q = n+1$, we have:
        % https://q.uiver.app/?q=WzAsMTEsWzIsMCwiXFxwaV97bn0oXFxTUCBcXGJpZ3ZlZV97YSBcXGluIEF9IFNebl9hKSJdLFsxLDAsIlxccGlfe24rMX0oQ19cXHBoaSkiXSxbMCwwLCIwIl0sWzMsMCwiXFxwaV97bn0oXFxTUCBcXGJpZ3ZlZV97YiBcXGluIEJ9IFNebl9iKSJdLFs0LDAsIlxccGlfbihDX1xccGhpKSJdLFs1LDAsIjAiXSxbMiwxLCJcXGJpZ29wbHVzX3thIFxcaW4gQX0gXFxiYlpfYSJdLFszLDEsIlxcYmlnb3BsdXNfe2IgXFxpbiBCfSBcXGJiWl9iIl0sWzQsMSwiRyJdLFs1LDEsIjAiXSxbMSwxLCIwIl0sWzEsMF0sWzIsMV0sWzAsMywiXFxwaGlfKiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1vbm8ifX19XSxbMyw0LCIiLDAseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJlcGkifX19XSxbNCw1XSxbMCw2LCJcXGNvbmciLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw3LCJcXGNvbmciLDMseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJub25lIn0sImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbNiw3LCJmIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibW9ubyJ9fX1dLFs3LDgsIiIsMix7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFs0LDgsIlxcY29uZyIsMyx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6Im5vbmUifSwiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFs4LDldLFsxMCw2XV0=
        \[\begin{tikzcd}
            0 & {\pi_{n+1}(C_\phi)} & {\pi_{n}(\SP \bigvee_{a \in A} S^n_a)} & {\pi_{n}(\SP \bigvee_{b \in B} S^n_b)} & {\pi_n(C_\phi)} & 0 \\
            & 0 & {\bigoplus_{a \in A} \bbZ_a} & {\bigoplus_{b \in B} \bbZ_b} & G & 0
            \arrow[from=1-2, to=1-3]
            \arrow[from=1-1, to=1-2]
            \arrow["{\phi_*}", tail, from=1-3, to=1-4]
            \arrow[two heads, from=1-4, to=1-5]
            \arrow[from=1-5, to=1-6]
            \arrow["\cong"{marking}, draw=none, from=1-3, to=2-3]
            \arrow["\cong"{marking}, draw=none, from=1-4, to=2-4]
            \arrow["f"', tail, from=2-3, to=2-4]
            \arrow[two heads, from=2-4, to=2-5]
            \arrow["\cong"{marking}, draw=none, from=1-5, to=2-5]
            \arrow[from=2-5, to=2-6]
            \arrow[from=2-2, to=2-3]
        \end{tikzcd}\]
        We have $\pi_{n+1} (C_\phi) = 0$ since $\phi_*$ is monomorphism.\\
        \qed
    \end{prf}

    \begin{note}
        Construction of Eilenberg Mac-Lane space
        using Moore spaces is limited,
        there is another construction of
        $K(G,n)$ allows non-abelian group $G$ for $n = 1$.
        (use geometric realization)
    \end{note}

    \begin{defn}
        The \tbf{weak product} of pointed $\{ Z_i \}_{i \in Z}$ spaces is
        \[
        \interior{\prod}_{i \in \bbN} Z_i := \colim \limits_{S \in \Fin(\bbN)} (\prod_{i \in S} Z_i) \\
        \]
        whose underlying set is:
        \[
        \{ (a_i)_{i \in \bbN} \in \prod_{i \in \bbN} Z_i \mid \text{only finite $a_i$ is not $\ast$ } \}
        \]
    \end{defn}

    Theorem following shows why $K(G,n)$ is important:

    \begin{thm}
        If $Y$ is a path-connected commutative
        $H$-space with strict identity
        ($1 \cdot y = y$),
        then there is a weak equivalence
        \[
        \interior{\prod}_{n \geq 1} K(\pi_n(Y),n) \to Y
        \]
        Moreover, we have weak equivalence
        \[
        \prod_{n \geq 1} K(\pi_n(Y),n) \to Y
        \]
    \end{thm}
    
    \begin{prf}
        Take free resolution of $\pi_n(Y)$:
        \[
        0 \to \bigoplus_{a \in A} \bbZ_a \xrightarrow{\gamma} \bigoplus_{b \in B} \bbZ_b \xrightarrow{q} \pi_n(Y) \to 0
        \]
        (for $n=1$, replace $\bigoplus$ with $\coprod$).
        and obtain:
        % https://q.uiver.app/?q=WzAsNixbMCwwLCJcXGJpZ3ZlZV97YSBcXGluIEF9IFNebl9hIl0sWzEsMCwiXFxiaWd2ZWVfe2IgXFxpbiBCfSBTXm5fYiJdLFswLDEsIlxcYXN0Il0sWzEsMSwiWSJdLFsyLDAsIkNfXFxwaGkgXFxjb25nIE0oXFxwaV9uKFksbikpIl0sWzIsMSwiQ197aX0gXFxzaW1lcSBZIl0sWzAsMSwiXFxwaGkiXSxbMCwyXSxbMiwzLCJpIiwyLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMSwzLCJcXGJpZ3ZlZV97YiBcXGluIEJ9IGYnX2IiXSxbMSw0XSxbMyw1XSxbNCw1LCJmX00iLDAseyJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJkYXNoZWQifX19XSxbMiwxLCJcXHNpbWVxIiwzLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoibm9uZSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
        \[\begin{tikzcd}
            {\bigvee_{a \in A} S^n_a} & {\bigvee_{b \in B} S^n_b} & {C_\phi \cong M(\pi_n(Y,n))} \\
            \ast & Y & {C_{i} \simeq Y}
            \arrow["\phi", from=1-1, to=1-2]
            \arrow[from=1-1, to=2-1]
            \arrow["i"', hook, from=2-1, to=2-2]
            \arrow["{\bigvee_{b \in B} g'_b}", from=1-2, to=2-2]
            \arrow[from=1-2, to=1-3]
            \arrow[from=2-2, to=2-3]
            \arrow["{f'_n}", dashed, from=1-3, to=2-3]
            \arrow["\simeq"{marking}, draw=none, from=2-1, to=1-2]
        \end{tikzcd}\]
        where $[g'_b] = q(1_b)$.
        We have
        $f'_{n*} : \pi_n(M(\pi_n(Y),n)) \to \pi_n(Y)$ is an isomorphism.\\
        Construct
        $f'^k_n : \prod_k M(\pi_n(Y),n) \to Y$
        by:
        \begin{align*}
            f'^k_n : \prod_k M(\pi_n(Y),n) & \to Y\\
            (a_1, a_2, \dots, a_k) & \mapsto f(a_1) \cdot f(a_2) \cdots f(a_k)
        \end{align*}
        where $- \cdot - : Y \times Y \to Y$ is the $H$-multiplication on $Y$.\\
        Strict identity,
        commutativity and associativity says it is homotopically unique $\rel \ast$.\\
        Therefore we have a well-defined map $f^k_n : \SP^k M(\pi_n(Y),n) \to Y$
        (for each $k$)
        which commutes with inclusion $\SP^k \hookrightarrow \SP^{k+1}$.\\
        Directly from above,
        we have $f_n : \SP M(\pi_n(Y),n) \to Y$
        induces isomorphism on $\pi_n(-)$.
        (in case $n=1$, $\pi_1(Y)$ is abelian since $Y$ is a commutative $H$-space)\\
        Similarly we have $f : \SP (\bigvee_n M(\pi_n(Y),n) ) \to Y$
        obtained from $\bigvee_n f'_n : \bigvee_n M(\pi_n(Y),n) \to Y$.\\
        $\SP (\bigvee_n M(\pi_n(Y),n) ) \approx \interior{\prod}_n \SP M(\pi_n(Y),n)$
        since we have \hyperref[hyp:SP-of-wedge-is-product-of-SP]{$\SP (X_1 \vee X_2) \approx \SP X_1 \times \SP X_2$}
        and \hyperref[hyp:SP-commute-with-directed-colimit]{$\SP$ commute with directed colimit}.
        We can deduce that $f|_{\SP M(\pi_n(Y),n)} = f_n$
        from construction of the homeomorphism.\\
        Last, $\interior{\prod}_n K(\pi_n(Y),n) \hookrightarrow \prod_n K(\pi_n(Y),n)$
        is weak homotopy equivalence
        since $S^n$ have compact image.
        (is homotopy equivalence since they are CW-complexes)\\
        \qed
    \end{prf}




\end{document}